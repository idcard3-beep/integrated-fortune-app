(function(){const todayEl=document.getElementById('today');if(todayEl){const d=new Date();todayEl.textContent=`${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,'0')}-${String(d.getDate()).padStart(2,'0')}${String(d.getHours()).padStart(2,'0')}:${String(d.getMinutes()).padStart(2,'0')}`;}})();(function(){const sidebar=document.getElementById('sidebar');const menuBtn=document.getElementById('menuBtn');if(menuBtn&&sidebar){menuBtn.addEventListener('click',()=>sidebar.classList.toggle('open'));}
window.addEventListener('hashchange',()=>{if(matchMedia('(max-width:900px)').matches&&sidebar)
sidebar.classList.remove('open');});})();(function(){function syncNav(){const currentPath=window.location.pathname;document.querySelectorAll('.nav-btn').forEach((a)=>{a.removeAttribute('aria-current');const href=a.getAttribute('href');if(href.startsWith('#')){if(location.hash===href||(location.hash===''&&href==='#code')){a.setAttribute('aria-current','page');}}
else if(href===currentPath){a.setAttribute('aria-current','page');}});}
window.addEventListener('hashchange',syncNav);syncNav();})();(function(){function getCurrentUserRole(){if(window.getAdminSession&&window.getAdminSession().isLoggedIn){const adminSession=window.getAdminSession();console.log('ðŸ” ê´€ë¦¬ìž ì„¸ì…˜ ê°ì§€:',adminSession);return adminSession.role||'ADMIN';}
if(window.getMemberSession&&window.isMemberLoggedIn&&window.isMemberLoggedIn()){const memberSession=window.getMemberSession();console.log('ðŸ‘¤ íšŒì› ì„¸ì…˜ ê°ì§€:',memberSession);return memberSession.role||'USER';}
return'USER';}
function checkAdminPermission(actionName){const currentRole=getCurrentUserRole();console.log(`ðŸ” ê¶Œí•œ ì²´í¬-ìž‘ì—…:${actionName},í˜„ìž¬ ê¶Œí•œ:${currentRole}`);if(currentRole!=='ADMIN'){alert(`âŒ ì ‘ê·¼ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.\n\n`+`ðŸ”’ ìš”ì²­ ìž‘ì—…:${actionName}\n`+`ðŸ‘¤ í˜„ìž¬ ê¶Œí•œ:${currentRole}\n`+`âœ… í•„ìš” ê¶Œí•œ:ADMIN\n\n`+`ê´€ë¦¬ìž ê¶Œí•œ(ADMIN)ì´ í•„ìš”í•©ë‹ˆë‹¤.\n`+`ê´€ë¦¬ìž ë¡œê·¸ì¸ì„ ì§„í–‰í•´ì£¼ì„¸ìš”.`);return false;}
console.log(`âœ… ê¶Œí•œ ìŠ¹ì¸-${actionName}ìž‘ì—… í—ˆìš©`);return true;}
document.querySelectorAll('[data-go]').forEach((btn)=>{btn.addEventListener('click',()=>{const id=btn.getAttribute('data-go');location.hash='#'+id;document.getElementById(id)?.scrollIntoView({behavior:'smooth',block:'start'});});});document.querySelectorAll('[data-demo]').forEach((btn)=>{btn.addEventListener('click',()=>{const area=btn.getAttribute('data-demo');alert(`"${area}"ë°ëª¨:ê°€ì´ë“œ/ë§ˆë²•ì‚¬/í…œí”Œë¦¿ ëª¨ë‹¬ ì—°ê²° ìœ„ì¹˜ìž…ë‹ˆë‹¤.`);});});const mapBtnToAction=[['openBcodeBtn','/secret/sit005.html','ê¸°ì´ˆ ì½”ë“œê´€ë¦¬'],['openMemlistBtn','/secret/a03_admin_memlist.html','íšŒì› ë¹„ë°€ìƒë‹´ìš”ì²­ ê´€ë¦¬'],['openMemcardBtn','/secret/a02_admin_memcard.html','ë©¤ë²„íšŒì› ì •ë³´ê´€ë¦¬'],['openMembatchBtn','/secret/a05_admin_membatch.html','ì¼ê´„ê´€ë¦¬'],['openAdminCardBtn','/secret/a06_adminCard.html','ê´€ë¦¬ìž ê³„ì •ê´€ë¦¬'],['openAnswersBtn','/secret/a03_admin_memlist.html','ê´€ë¦¬ìž ë‹µë³€ê´€ë¦¬'],];mapBtnToAction.forEach(([id,href,action])=>{const el=document.getElementById(id);if(el){el.addEventListener('click',()=>{if(!checkAdminPermission(action))return;console.log(`${action}ë²„íŠ¼ í´ë¦­ë¨!`);window.location.href=href;});}});const closeBtn=document.getElementById('closeBtn');if(closeBtn){closeBtn.addEventListener('click',function(){if(window.opener){window.close();}else if(window.history.length>1){window.history.back();}else{window.close();setTimeout(()=>{window.location.href='/secret/main_index';},100);}});}
const homeBtn=document.getElementById('homeBtn');if(homeBtn){homeBtn.addEventListener('click',()=>{location.hash='#code';window.scrollTo({top:0,behavior:'smooth'});});}
const logoutBtn=document.getElementById('logoutBtn');if(logoutBtn){logoutBtn.addEventListener('click',()=>{alert('ë¡œê·¸ì•„ì›ƒ API ì—°ë™ ì§€ì ìž…ë‹ˆë‹¤.');});}
const settingsBtn=document.getElementById('settingsBtn');if(settingsBtn){settingsBtn.addEventListener('click',()=>{alert('ì„¤ì • ëª¨ë‹¬/íŽ˜ì´ì§€ ì—°ê²° ì§€ì ìž…ë‹ˆë‹¤.');});}
const quitBtn=document.getElementById('quitBtn');if(quitBtn){quitBtn.addEventListener('click',()=>{if(confirm('ì—…ë¬´ë¥¼ ì¢…ë£Œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\nìž„ì‹œ ì €ìž¥ ë° ì„¸ì…˜ ì •ë¦¬ë¥¼ ìˆ˜í–‰í•œ ë’¤ ë¡œê·¸ì•„ì›ƒí•©ë‹ˆë‹¤.')){alert('ì •ìƒ ì¢…ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ì¢‹ì€ í•˜ë£¨ ë˜ì„¸ìš”!');}});}
const autosaveBtn=document.getElementById('autosaveBtn');if(autosaveBtn){autosaveBtn.addEventListener('click',()=>{alert('ìžë™ì €ìž¥ ì˜µì…˜ì„ ì„¤ì •í•˜ëŠ” ëª¨ë‹¬ì„ ì—°ê²°í•˜ì„¸ìš”.');});}
const THEME_KEY='admin-theme';const themeSelect=document.getElementById('themeSelect');function applyTheme(mode){if(!themeSelect)return;if(mode==='auto'){document.documentElement.removeAttribute('data-theme');}else{document.documentElement.setAttribute('data-theme',mode);}
localStorage.setItem(THEME_KEY,mode);themeSelect.value=mode;}
if(themeSelect){applyTheme(localStorage.getItem(THEME_KEY)||'auto');themeSelect.addEventListener('change',(e)=>applyTheme(e.target.value));}
const toTop=document.getElementById('toTop');if(toTop){window.addEventListener('scroll',()=>{if(window.scrollY>160)toTop.classList.add('show');else toTop.classList.remove('show');});toTop.addEventListener('click',()=>window.scrollTo({top:0,behavior:'smooth'}));}})();