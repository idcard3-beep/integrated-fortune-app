<!doctype html><html lang=ko><meta charset=UTF-8><meta content="width=device-width,initial-scale=1.0" name=viewport><title>{{ year }}년 {{ month }}월 만세력</title><link href=https://fonts.googleapis.com rel=preconnect><link crossorigin href=https://fonts.gstatic.com rel=preconnect><link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@400;500;600;700&display=swap" rel=stylesheet><link href="{{ url_for('mans.static', filename='calendar.css') }}" rel=stylesheet><link href="{{ url_for('secret.static', filename='security.css') }}" rel=stylesheet><style>/* 컴팩트 팝업 전용 스타일 */
      .ganzi-popup {
        display: none;
        position: fixed;
        top: 50px;
        right: 50px;
        min-width: 200px;
        max-width: 220px;
        background: rgba(255, 255, 255, 0.98);
        backdrop-filter: blur(20px);
        border-radius: 8px;
        padding: 8px;
        box-shadow: 0 15px 40px rgba(0, 0, 0, 0.25);
        border: 1px solid rgba(255, 255, 255, 0.3);
        z-index: 1000;
        font-size: 0.7rem;
        line-height: 1.2;
      }

      .popup-header {
        background: linear-gradient(135deg, #1e3a8a, #3b82f6);
        color: white;
        padding: 4px 8px;
        border-radius: 4px;
        margin: -8px -8px 6px -8px;
        text-align: center;
        font-size: 0.75rem;
        font-weight: 600;
      }

      .popup-section {
        margin-bottom: 4px;
        padding: 4px;
        border-radius: 3px;
        font-size: 0.7rem;
      }

      .section-header {
        color: #6b7280;
        font-size: 0.65rem;
        margin-bottom: 2px;
        font-weight: 500;
      }

      .info-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 3px;
        font-size: 0.75rem;
      }

      .info-item {
        background: rgba(248, 250, 252, 0.8);
        padding: 2px 4px;
        border-radius: 3px;
      }

      .info-label {
        color: #dc2626;
        font-weight: 600;
        font-size: 0.7rem;
      }

      .info-value {
        color: #1e3a8a;
        font-weight: 600;
      }

      .solar-section {
        background: rgba(59, 130, 246, 0.05);
      }

      .saju-section {
        background: rgba(245, 158, 11, 0.05);
      }

      .term-section {
        background: rgba(34, 197, 94, 0.05);
      }

      .moon-section {
        background: rgba(124, 58, 237, 0.05);
      }

      .ganzi-close {
        position: absolute;
        top: 4px;
        right: 8px;
        cursor: pointer;
        font-size: 14px;
        color: white;
        background: rgba(0, 0, 0, 0.2);
        border-radius: 50%;
        width: 20px;
        height: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
      }

      .ganzi-close:hover {
        background: rgba(220, 38, 38, 0.8);
        transform: scale(1.1);
      }

      .compact-row {
        display: flex;
        justify-content: space-between;
        margin: 1px 0;
        font-size: 0.65rem;
      }

      .compact-label {
        color: #6b7280;
        font-size: 0.6rem;
        flex-shrink: 0;
        margin-right: 4px;
      }

      .compact-value {
        color: #111827;
        font-weight: 500;
        font-size: 0.65rem;
        text-align: right;
        word-break: break-word;
      }

      /* 모바일 대응 */
      @media (max-width: 768px) {
        .ganzi-popup {
          top: 10px;
          right: 10px;
          left: 10px;
          min-width: auto;
          max-width: none;
          font-size: 0.75rem;
        }
      }</style><body><div class="container calendar-responsive"><header class=calendar-header><div class=calendar-header-row><div><h1>{{ year }}년 {{ month }}월 만세력</h1><h2>{{ year }}년 {{ month }}월 ({{ month_gānzhī }}월)</h2></div><div class=calendar-header-btns><button onclick="window.open('/saju/', '_blank')" class=calendar-btn type=button>사주보기</button><button class="calendar-btn alt" onclick="window.location.href='/mans/mainpillar'" type=button>변환 계산기</button></div></div></header><div class=calendar-nav-row><form class="date-selector calendar-nav-form" action=/mans/calendar method=POST><button class=calendar-btn name=nav value=prev>◀ 이전달</button><input value="{{ year }}" class=calendar-input max=2100 min=1900 name=year type=number>년 <input value="{{ month }}" class=calendar-input max=12 min=1 name=month type=number>월 <button class=calendar-btn>이동</button><button class=calendar-btn name=nav value=next>다음달 ▶</button></form><form action=/mans/calendar class=calendar-today-form method=POST><input value="{{ today.year }}" name=year type=hidden><input value="{{ today.month }}" name=month type=hidden><button class="calendar-btn today" name=nav value=today>오늘</button></form></div><div class=manse-calendar><table><thead><tr><th class=sunday>일<th>월<th>화<th>수<th>목<th>금<th class=saturday>토<tbody>{% for week in calendar_weeks %} <tr>{% for day_info in week %} <td class="day-cell {% if day_info.is_today %}today{% endif %}" data-current-term-kst="{{ day_info.current_term_kst }}" data-current-term-name="{{ day_info.current_term_name }}" data-day="{{ day_info.day }}" data-day-gz="{{ day_info.day_gz }}" data-full-moon-kst="{{ day_info.full_moon_kst }}" data-hour-gz="{{ day_info.hour_gz }}" data-jeolip-kst="{{ day_info.jeolip_kst or '' }}" data-jeolip-term="{{ day_info.jeolip_term or '' }}" data-junggi-kst="{{ day_info.junggi_kst or '' }}" data-junggi-term="{{ day_info.junggi_term or '' }}" data-lunar="{{ day_info.lunar }}" data-month="{{ month }}" data-month-gz="{{ day_info.month_gz }}" data-new-moon-kst="{{ day_info.new_moon_kst }}" data-next-jeolip-kst="{{ day_info.next_jeolip_kst or '' }}" data-next-jeolip-term="{{ day_info.next_jeolip_term or '' }}" data-year="{{ year }}" data-year-gz="{{ day_info.year_gz }}" style="cursor: pointer" %} day_info.day endif if onclick=showGanziInfo(this) {%>{% if day_info.day %} <div class="solar-day {% if loop.index == 1 %}sunday{% elif loop.index == 7 %}saturday{% endif %}">{{ day_info.day }}</div> <div class=gānzhī-info>{{ day_info.gānzhī }}일</div> <div class=lunar-info>음력: {{ day_info.lunar }}</div> {% if day_info.term %} <div class=term-info>★ {{ day_info.term }}</div> {% endif %} {% endif %}</td> {% endfor %}</tr> {% endfor %}</table></div><div class=ganzi-popup id=ganzi-popup><div class=popup-header><span class=ganzi-close id=ganzi-close>✖</span><div id=popup-title></div></div><div id=ganzi-content></div></div></div><script src="{{ url_for('mans.static', filename='calendar.js') }}"></script><script src="{{ url_for('secret.static', filename='member_session.js') }}"></script><script src="{{ url_for('secret.static', filename='admin_session.js') }}"></script><script src="{{ url_for('secret.static', filename='security.js') }}"></script>