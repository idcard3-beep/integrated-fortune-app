(function(){console.log('ğŸš€ greet ìŠ¤í¬ë¦½íŠ¸ ì¦‰ì‹œ ì‹¤í–‰ ì‹œì‘');const yearEl=document.getElementById('year');if(yearEl){yearEl.textContent=new Date().getFullYear();console.log('âœ“ Year ì„¤ì • ì™„ë£Œ');}
const root=document.documentElement;const saved=localStorage.getItem('ntt-theme');if(saved==='dark')root.classList.add('dark');const themeBtn=document.getElementById('themeToggle');if(themeBtn){themeBtn.addEventListener('click',()=>{root.classList.toggle('dark');localStorage.setItem('ntt-theme',root.classList.contains('dark')?'dark':'light');console.log('âœ“ í…Œë§ˆ ì „í™˜ë¨');});console.log('âœ“ í…Œë§ˆ í† ê¸€ ë²„íŠ¼ ë“±ë¡ ì™„ë£Œ');}
const closeBtn=document.getElementById('closeBtn');if(closeBtn){closeBtn.addEventListener('click',()=>{if(window.self!==window.top){window.parent.postMessage('closeIframe','*');}else{window.close();}
console.log('âœ“ ë‹«ê¸° ë²„íŠ¼ í´ë¦­ë¨');});console.log('âœ“ ë‹«ê¸° ë²„íŠ¼ ë“±ë¡ ì™„ë£Œ');}
const progress=document.getElementById('progress');if(progress){function setProgress(){const h=document.documentElement;const max=h.scrollHeight-h.clientHeight;progress.style.transform=`scaleX(${max>0?h.scrollTop/max:0})`;}
document.addEventListener('scroll',setProgress,{passive:true});setProgress();console.log('âœ“ Progress bar ë“±ë¡ ì™„ë£Œ');}
const anchorLinks=document.querySelectorAll('a[href^="#"]');console.log('ğŸ“ ì°¾ì€ ì•µì»¤ ë§í¬ ìˆ˜:',anchorLinks.length);anchorLinks.forEach((a)=>{const href=a.getAttribute('href');console.log('  - ë“±ë¡ ì¤‘:',href);a.addEventListener('click',(e)=>{e.preventDefault();e.stopImmediatePropagation();console.log('ğŸ¯ í´ë¦­ë¨:',href);const t=document.querySelector(href);if(t){console.log('  â†’ ëŒ€ìƒ ìš”ì†Œ ì°¾ìŒ:',t.id);try{t.scrollIntoView({behavior:'smooth',block:'start',});console.log('  âœ“ scrollIntoView ì‹¤í–‰ë¨');setTimeout(()=>{window.scrollBy({top:-70,behavior:'smooth'});},100);}catch(err){console.error('  âœ— scrollIntoView ì‹¤íŒ¨:',err);const offset=t.offsetTop-70;document.documentElement.scrollTop=offset;document.body.scrollTop=offset;console.log('  âœ“ ì§ì ‘ ìŠ¤í¬ë¡¤ ì„¤ì •:',offset);}}else{console.warn('  âœ— ëŒ€ìƒ ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ:',href);}
return false;},true);});console.log('âœ“ ëª¨ë“  ì•µì»¤ ë§í¬ ë“±ë¡ ì™„ë£Œ');const links=Array.from(document.querySelectorAll('.nav a'));const secs=links.map((a)=>document.querySelector(a.getAttribute('href'))).filter(Boolean);if(links.length>0){function spy(){const y=window.scrollY+120;let id=null;for(const s of secs){if(s.offsetTop<=y)id='#'+s.id;}
links.forEach((a)=>a.classList.toggle('active',a.getAttribute('href')===id));}
document.addEventListener('scroll',spy,{passive:true});spy();console.log('âœ“ Scrollspy ë“±ë¡ ì™„ë£Œ');}
const avatarInput=document.getElementById('avatarInput');const signInput=document.getElementById('signInput');const avatarBox=document.getElementById('avatarBox');const signBox=document.getElementById('signBox');function loadImage(file,target){if(!file)return;const reader=new FileReader();reader.onload=(e)=>{if(target==='avatar'){avatarBox.innerHTML=`<img alt="í”„ë¡œí•„"src="${e.target.result}">`;}else{signBox.src=e.target.result;signBox.alt='ì„œëª…';}};reader.readAsDataURL(file);}
if(avatarInput){avatarInput.addEventListener('change',()=>loadImage(avatarInput.files[0],'avatar'));console.log('âœ“ ì•„ë°”íƒ€ ì—…ë¡œë“œ ë“±ë¡ ì™„ë£Œ');}
if(signInput){signInput.addEventListener('change',()=>loadImage(signInput.files[0],'sign'));console.log('âœ“ ì„œëª… ì—…ë¡œë“œ ë“±ë¡ ì™„ë£Œ');}
const scrollToTopBtn=document.getElementById('scrollToTop');if(scrollToTopBtn){scrollToTopBtn.addEventListener('click',function(e){e.preventDefault();e.stopPropagation();console.log('ğŸ” ë§¨ ìœ„ë¡œ ê°€ê¸° ë²„íŠ¼ í´ë¦­ë¨');try{window.scrollTo({top:0,behavior:'smooth'});console.log('  â†’ scrollTo ì‹¤í–‰ë¨');}catch(err){console.warn('  â†’ scrollTo ì‹¤íŒ¨, ì§ì ‘ ì„¤ì • ì‹œë„');document.documentElement.scrollTop=0;document.body.scrollTop=0;}
setTimeout(()=>{if(window.pageYOffset>0||document.documentElement.scrollTop>0){console.warn('  â†’ ìŠ¤í¬ë¡¤ ë¯¸ì™„ë£Œ, ê°•ì œ ì„¤ì •');document.documentElement.scrollTop=0;document.body.scrollTop=0;window.pageYOffset=0;}},100);},false);console.log('âœ… Scroll to Top ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ ë“±ë¡ ì™„ë£Œ (ìµœì¢…)');}else{console.error('âŒ Scroll to Top ë²„íŠ¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤!');}
console.log('âœ… greet.js ë¡œë“œ ì™„ë£Œ - ëª¨ë“  ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡ë¨');})();