<!DOCTYPE html><html lang="ko" data-theme="light"><head><meta charset="utf-8" /><meta name="viewport" content="width=device-width,initial-scale=1" /><title>주역 64괘-육효 (원문·384효 전량 + 64개 공역)</title><link rel="stylesheet" href="{{ url_for('common_static', filename='security.css') }}" /><link rel="stylesheet" href="/secret/static/6yao.css" /></head><body><div class="topbar"><div class="topbar-inner"><div class="brand"> 🧭 주역 64괘-육효 <span class="badge" >원문·384효 전량 + 64개 공역(한글) · 기능 원형 유지</span ></div><div class="controls"><input id="q" type="search" placeholder="검색: 번호/괘명/원문어구/지지 — Enter" onkeydown="if(event.key==='Enter'){event.preventDefault();doFilter(this.value);}" /><select id="panbonSel" title="판본/계통"><option value="jeungsan">증산복역</option><option value="bokseo">복서정종</option></select><select id="seqSel" title="배열"><option value="wen">문왕괘체(1–64)</option><option value="palace">팔궁 순환체</option><option value="jeong">정역 배열(사용자 정의)</option></select><select id="najapSel" title="納甲/納支 계통"><option value="myeongga">명가본(기본)</option><option value="gyeongbang">경방</option><option value="bokseo_rule">복서정종식</option></select><select id="themeSel" title="테마"><option value="light">라이트</option><option value="dark">다크</option><option value="단청">단청</option><option value="목간">목간</option></select><button id="btnJeongCfg">정역 배열</button><button id="btnCorpus">코퍼스 내장/백업</button><button id="btnAdminLogin" title="관리자 로그인" style="background: #dc2626; color: white" > 🔐 관리자 </button><button id="btnCloseTop" title="화면 닫기" style=" background: #ef4444; color: white; border: none; border-radius: 8px; padding: 8px 16px; font-weight: 600; font-size: 14px; cursor: pointer; transition: 0.3s; " > ✖ 닫기 </button></div></div></div><div class="container"><section class="card" id="sec-pal-chart"><h2>팔궁괘차도</h2><div id="palChart" class="pal-chart-grid"></div><p class="note">배지: 본궁(純)/1세/2세/3세/4세/5세/游魂/歸魂</p></section><section class="card" id="sec-najap"><h2>8궁 납갑표</h2><div class="table-wrap"><table id="najapTable"><thead><tr><th>궁</th><th>단계</th><th>괘번호·괘명</th><th>괘상</th><th>納甲(상·하)</th><th>6효 納支(下3·上3)</th><th>五行</th></tr></thead><tbody></tbody></table></div></section><section class="card" id="detailSection"><h2>개괄적인 설명-원문 전량·공역(한글)+6효 본문형</h2><div id="detailGrid" class="grid cols-2" style="isolation: isolate; contain: layout style paint" ></div></section><section class="card" id="detailGridExtraSection" style=" display: block !important; visibility: visible !important; min-height: 300px !important; " ><h2 style="color: var(--brand); font-size: 20px; margin-bottom: 15px"> 📚 각괘별 추가 코퍼스 정보 (10개 항목: 괘사·6효 원문·번역·심리·상담·조언·코칭·사례·현대사례) </h2><div id="detail-grid-content" class="grid cols-1" style=" display: grid !important; grid-template-columns: 1fr !important; gap: 20px !important; isolation: isolate; contain: layout style paint; min-height: 200px !important; " ><div style="padding: 20px; text-align: center; color: var(--muted)"> ⏳ 코퍼스 데이터 로딩 중... </div></div></section><section class="card"><h2>나라톡톡 주역 상담가 · 실전 작괘법(作卦法) · 육효점(六爻占)</h2><div id="consultCard"></div></section></div><div id="jeongModal" class="modal" aria-hidden="true"><div class="panel"><h3>정역 배열(사용자 정의)</h3><div class="note">1~64 번호를 쉼표로 정확히 64개 입력</div><div class="sep"></div><textarea id="jeongInput" placeholder="예: 1,2,63,64,3,4,..." ></textarea><div style=" display: flex; gap: 8px; justify-content: flex-end; margin-top: 10px; " ><button id="btnJeongCancel">취소</button ><button id="btnJeongSave">저장</button></div></div></div><div id="corpusModal" class="modal" aria-hidden="true"><div class="panel"><h3>코퍼스 내장/백업</h3><p class="note"> ① <b>64괘 원문+효문+공역</b> 붙여넣기 → 저장 · ② 현재 내장본/메모/정역배열 <b>백업/복원</b></p><div style="display: flex; gap: 8px; flex-wrap: wrap; margin: 6px 0"><button id="btnPaste">64괘 원문+공역 붙여넣기</button><button id="btnExport">백업(내보내기)</button><button id="btnImport">복원(불러오기)</button><span id="hashTag" class="badge">무결성: —</span></div><div class="sep"></div><textarea id="corpusInput" placeholder='{ "1":{ "gua_orig":"…", "yao_orig":["…×6"], "gua_tran_ko":"…", "yao_tran_ko": ["…", "…", "…", "…", "…", "…"] // ← 선택(optional) }, "2":{…},…, "64":{…} }' ></textarea><div style=" display: flex; gap: 8px; justify-content: flex-end; margin-top: 10px; " ><button id="btnCorpusCancel">닫기</button ><button id="btnCorpusSave">저장</button></div></div></div><div id="adminLoginModal" class="modal" aria-hidden="true"><div class="panel"><h3 style="margin: 0; padding: 0; line-height: 1.2; height: auto"> 관리자 로그인 </h3><div class="sep"></div><iframe id="adminLoginFrame" src="/secret/admin_login" style=" width: 100%; height: 500px; border: none; border-radius: 8px; overflow: hidden; " ></iframe><div style=" display: flex; gap: 8px; justify-content: flex-end; margin-top: 10px; " ><button id="btnAdminLoginCancel">닫기</button></div></div></div><div class="modal" id="importModal"><div class="box"><h3>코퍼스 복원(불러오기) — JSON 붙여넣기</h3><textarea id="importArea" placeholder="여기에 JSON 전체를 붙여넣으세요" ></textarea><div class="actions"><button id="importCancel" class="btn">취소</button><button id="importDo" class="btn pri">가져오기</button></div></div></div><div id="detailgrid-debug-tools" style=" position: fixed; bottom: 10px; right: 10px; z-index: 9999; background: rgba(0, 0, 0, 0.8); color: white; padding: 10px; border-radius: 5px; font-size: 12px; display: none; " ><div style="margin-bottom: 5px; font-weight: bold">DetailGrid 디버깅</div><button onclick="window.DetailGridManager.IpbzcqcO()" style="margin: 2px; padding: 5px 8px; font-size: 11px" > 상태 확인 </button><button onclick="window.DetailGridManager.UHaGmTOd()" style="margin: 2px; padding: 5px 8px; font-size: 11px" > 코퍼스 테스트 </button><button onclick="window.DetailGridManager.Aep5ggn7()" style="margin: 2px; padding: 5px 8px; font-size: 11px" > 강제 재초기화 </button><br /><button onclick="document.getElementById('detailgrid-debug-tools').style.display='none'" style="margin: 2px; padding: 5px 8px; font-size: 11px" > 닫기 </button></div><script src="{{ url_for('common_static', filename='member_session.js') }}"></script><script src="{{ url_for('common_static', filename='admin_session.js') }}"></script><script src="{{ url_for('common_static', filename='security.js') }}"></script><script src="/secret/static/6yao.js"></script></body></html>