document.addEventListener('DOMContentLoaded',function(){var helpBtn=document.getElementById('helpBtn');var helpModal=document.getElementById('helpModal');if(helpBtn&&helpModal){helpBtn.addEventListener('click',function(){helpModal.style.display='flex';});}
var closeBtn=document.getElementById('closeBtn');if(closeBtn){closeBtn.addEventListener('click',function(){if(window.self!==window.top){window.parent.postMessage('closeIframe','*');}else{window.close();}});}});function slugify(s){return s.replace(/\s+/g,'').replace(/[^0-9A-Za-z\u3131-\uD79D\(\)\.\Â·\-&]/g,'');}
const SIDEBAR_DEFAULT_OPEN=[slugify('ì‚¬ì£¼ëª…ë¦¬')];const DATA=[{category:'ì‚¬ì£¼ëª…ë¦¬',desc:'ìŒì–‘ì˜¤í–‰Â·ì²œê°„ì§€ì§€Â·ì‹­ì„±/ê²©êµ­ìœ¼ë¡œ ê¸°ì§ˆÂ·í™˜ê²½Â·íƒ€ì´ë°ì„ ëª¨ë¸ë§. â€˜ê· í˜• ë³´ì •â€™ê³¼ â€˜í–‰ë™ ì „ëžµâ€™ìœ¼ë¡œ ê·€ê²°.',chips:['ì‹ ê°•/ì‹ ì•½','ëŒ€ìš´/ì„¸ìš´','ì‹­ì„±/ê²©êµ­','í•©Â·ì¶©Â·í˜•Â·íŒŒÂ·í•´','ìš©ì‹  ì „ëžµ','ì‚¬ê±´ ìº˜ë¦°ë”',],subs:[{title:'ê¸°ë³¸ ì´ë¡ ',note:'ì˜¤í–‰Â·ì²œê°„ì§€ì§€Â·ì‹­ì„±',sections:[{id:'ê°œìš”',label:'ê°œìš”',content:'ì‚¬ì£¼ì˜ ë„¤ ê¸°ë‘¥(ë…„Â·ì›”Â·ì¼Â·ì‹œ)ì— ì˜¤í–‰Â·ìŒì–‘Â·ì²œì§€ ìƒí˜¸ìž‘ìš©ì„ ì¤‘ì²©í•˜ì—¬ êµ¬ì¡°ë¥¼ ë„ì¶œ.',},{id:'ëª¨ë¸',label:'ëª¨ë¸/ì›ë¦¬',content:['ì‹­ì„±: ë¹„ê²/ì‹ìƒ/ìž¬ì„±/ê´€ì„±/ì¸ì„±ì˜ ì—­í•  ìŠ¤íŽ™íŠ¸ëŸ¼','ê²©êµ­: ê¸°ë³¸ê²©â†’ë³€ê²© íŒë‹¨ ì‹œ í•©Â·ì¶©Â·í˜• ìš°ì„ ìˆœìœ„ ë§¤íŠ¸ë¦­ìŠ¤','ë³´ì •: ìš©ì‹ (ë³´ì™„), ê¸°ì‹ (ì–µì œ)ì˜ ê· í˜• ë³µì›',],},{id:'ì•Œê³ ë¦¬ì¦˜',label:'í•´ì„ ì ˆì°¨(ì•Œê³ ë¦¬ì¦˜)',content:['â‘  ì‹ ê°•/ì‹ ì•½ íŒì • â†’ â‘¡ ê²©/í†µìš© â†’ â‘¢ ìš©/ê¸° ì„¤ì • â†’ â‘£ í•©Â·ì¶©Â·í˜• í‰ê°€ â†’ â‘¤ í–‰ë™ì „ëžµ',],},{id:'íŒì •',label:'íŒì • ê¸°ì¤€(ì§€í‘œ)',content:['ì‹­ì„± íŽ¸ì¤‘â‰¥40% â†’ ìš°ì„  ë³´ì • ëŒ€ìƒ','í•©/ì¶© ì—°ì† 2ì£¼ê¸° ì´ìƒ ì¤‘ì²© â†’ ê²½ê³„ ì´ë²¤íŠ¸','ìš©ì‹  ìš”ì†Œê°€ ìš´ì—ì„œ >50% ì¶œí˜„ â†’ ê¸°íšŒ ì°½',],},{id:'ì‚¬ë¡€',label:'ì‚¬ë¡€/ì ìš©',content:['ì‹ ì•½+ìž¬ì„± ê³¼ìž‰: ì„±ê³¼ì••â†‘ â†’ ê´€ì„±/ì¸ì„± ë³´ê°• ë£¨í‹´','ì‹ ê°•+ë¹„ê² ê³¼ìž‰: ìžìœ¨â†‘Â·ê·œë²” ì¶©ëŒ â†’ ì œì•½Â·ë¦¬ë·° ì²´ê³„',],},{id:'ë¦¬ìŠ¤í¬',label:'ë¦¬ìŠ¤í¬/íŽ¸í–¥',content:['ê²°ì •ë¡ /í›„ê´‘íš¨ê³¼ ê²½ê³„','í•´ì„ìž ë¸”ë¼ì¸ë“œ ì²´í¬(ë™ë£Œ í”¼ë“œë°±) ë„ìž…',],},{id:'ì²´í¬',label:'ì‹¤ë¬´ ì²´í¬ë¦¬ìŠ¤íŠ¸',content:['í•µì‹¬ ê°€ì • ë¬¸ì„œí™” â†’ ê²°ê³¼ ë¹„êµ(ì˜ˆì¸¡/ì‹¤ì œ)','ë¶„íŒŒ ì°¨ì´ëŠ” ì£¼ì„ ë³‘ê¸°',],},],},{title:'ëŒ€ìš´Â·ì„¸ìš´',note:'íƒ€ì´ë°/íë¦„ íŒì •',defaultOpen:true,sections:[{id:'ê°œìš”2',label:'ê°œìš”',content:'ëŒ€ìš´=êµ¬ì¡°(10ë…„), ì„¸ìš´=ë¯¸ì‹œ(ì—°/ì›”). êµ¬ì¡°â†’ë¯¸ì‹œâ†’í–‰ë™ ìˆœìœ¼ë¡œ ê³„íš.',},{id:'ì ˆì°¨2',label:'íŒë… ì ˆì°¨',content:['â‘  ëŒ€ìš´ì˜ ìš©/ê¸° ì—¬ë¶€Â·í•©/ì¶© í‰ê°€ë¡œ â€˜ìž¥ë¥´â€™ íŒŒì•…','â‘¡ ì—°Â·ì›” ì„¸ìš´ìœ¼ë¡œ ì´ë²¤íŠ¸ ì°½ ì„¸ë¶„í™”','â‘¢ ì¤€ë¹„(ìžê¸ˆ/ë„¤íŠ¸ì›Œí¬/ì—­ëŸ‰)â†’ì‹¤í–‰â†’ê²€í† (íšŒê³ )',],},{id:'ìœˆë„2',label:'ê¸°íšŒ/ê²½ê³„ ìœˆë„ìš°',content:['ìš©ì‹  ëŒ€ìš´ + ìš©ì‹  ì—°(ì›”) â†’ ê³µê²©ì  í™•ìž¥','ê¸°ì‹  ëŒ€ìš´ + ì¶©/í˜• ì¤‘ì²© â†’ ë³´ìˆ˜Â·ë¦¬ìŠ¤í¬ ì¶•ì†Œ',],},{id:'ì§€í‘œ2',label:'ìš´ì˜ ì§€í‘œ/ë¡œê·¸',content:['ê²°ì • ë¡œê·¸: ê°€ì„¤Â·ê²°ê³¼Â·êµí›ˆ ê¸°ë¡','ìº˜ë¦°ë” íƒœê¹…: í•©/ì¶©/í˜•/íŒŒ ì´ë²¤íŠ¸ ë¼ë²¨',],},{id:'ì²´í¬2',label:'ì²´í¬ë¦¬ìŠ¤íŠ¸',content:['ëŒ€ìš´ ì „í™˜ ì „í›„ 6~18ê°œì›”: ì˜ì‚¬ê²°ì • ë³´ë¥˜Â·íŒŒì¼ëŸ¿','ë³€ê³¡ 2~3ì£¼ ì „: ì„ í–‰ ê³¼ì œ 80% ì´ìƒ ì™„ë£Œ',],},],},{title:'ìš©ì‹ Â·ê²©êµ­',note:'ê· í˜•/ë³´ì • ì „ëžµ',sections:[{id:'ì›ë¦¬3',label:'ì›ë¦¬',content:'ê³¼ë¶€ì¡± ì˜¤í–‰ì„ â€˜í™˜ê²½Â·ì—­í• Â·ìŠµê´€â€™ 3ì¶•ì—ì„œ ë³´ì •. ì–µì œê°€ ì•„ë‹ˆë¼ ê· í˜• íšŒë³µ.',},{id:'ì „ëžµ3',label:'ì „ëžµ ì„¤ê³„',content:['í™˜ê²½: íŒ€/ë„ë©”ì¸/ê±°ì£¼/ê·¼ë¬´ì‹œê°„','ì—­í• : ë¦¬ë”/íŒ”ë¡œì›Œ, ì œìž‘/ê°ë…, ëŒ€ì™¸/ëŒ€ë‚´','ìŠµê´€: ìˆ˜ë©´/ì‹/ìš´ë™/í•™ìŠµ(4ì£¼ ìŠ¤í”„ë¦°íŠ¸)',],},{id:'ì‚¬ë¡€3',label:'ì‚¬ë¡€',content:['ëª©Â·í™” ë¶€ì¡±(ì‹ ì•½í˜•): ì°½ì˜Â·ëŒ€ì™¸ ê³¼ì œ ë°°ì¹˜, ë©˜í† ë§','ê¸ˆÂ·ìˆ˜ ê³¼ìž‰(ì‹ ê°•í˜•): ê·œì •/ë°ë“œë¼ì¸ ê°•í™”',],},{id:'ë©”íŠ¸ë¦­3',label:'ëª¨ë‹ˆí„°ë§ ì§€í‘œ',content:['ë£¨í‹´ ì¤€ìˆ˜ìœ¨Â·í”¼ë¡œë„Â·ì„±ê³¼ ë³€ë™í­','ë¶„ê¸°ë³„ ë¦¬ë°¸ëŸ°ì‹± ì„¸ì…˜',],},],},{title:'ê´€ê³„Â·ê¶í•©',note:'í•©/ì¶© íŒ¨í„´',sections:[{id:'í”„ë ˆìž„4',label:'í”„ë ˆìž„',content:'ìƒìƒì´ë©´ ìƒì‚°ì„±â†‘, ìƒê·¹ì´ë©´ í”¼ë¡œâ†‘. ëŒ€ìš´ êµì°¨ëŠ” ê²½ê³„.',},{id:'ë§¤íŠ¸ë¦­ìŠ¤4',label:'ì§„ë‹¨ ë§¤íŠ¸ë¦­ìŠ¤(2Ã—2)',content:['ê³¼ì—… ì í•©(ê¸°ìˆ /ê·œë²”) Ã— ì •ì„œ ì í•©(ì‹ ë¢°/ì†Œí†µ)','í•©/ì¶© ì´ë²¤íŠ¸ë¥¼ ì£¼ê¸°Â·ê°•ë„ë¡œ ìˆ˜ì¹˜í™”',],},{id:'ê°œìž…4',label:'ê°œìž…',content:['ì—­í• Â·ê¶Œí•œÂ·í”¼ë“œë°± ì£¼ê¸° ìž¬ì„¤ê³„','ì„¸ìš´ ë³€ê³¡ê³¼ ê²¹ì¹˜ë©´ ì¤‘ìž¬/ì¿¨ë‹¤ìš´',],},{id:'ì§€í‘œ4',label:'ê´€ê³„ ì§€í‘œ',content:['ê°ˆë“± ë¹ˆë„Â·í•´ê²° ì‹œê°„, ëª°ìž…/ì†Œì§„ ìŠ¤ì½”ì–´','í”¼ë“œë°± ìˆœí™˜ì£¼ê¸° ì¤€ìˆ˜ìœ¨',],},],},],},{category:'ì£¼ì—­',desc:'ê´˜Â·íš¨Â·ë³€ê´˜ë¡œ â€˜ë³€í™” ë°©í–¥â€™ê³¼ â€˜ì ì • ëŒ€ì‘â€™ì„ ì„¤ê³„. ì§ˆë¬¸ ëª…ë£Œí™”ë¡œ ì˜ˆì§€íŽ¸í–¥ ìµœì†Œí™”.',chips:['ê´˜ìƒ í•´ì„','íš¨ì‚¬/ê´˜ì‚¬','ë³€ê´˜Â·í•©ê´˜','ì§ˆë¬¸ ì„¤ê³„','ë¦¬ìŠ¤í¬ ê´€ë¦¬','ê²°ì • ë¡œê·¸',],subs:[{title:'ìœ¡íš¨(å…­çˆ»)',note:'ì‹œì ë³„ íŒì •',sections:[{id:'ê°œìš”5',label:'ê°œìš”',content:'ì‹œê°„ì„±ì„ ê°€ì§„ ì˜ì‚¬ê²°ì • ë³´ì¡°ë„êµ¬. ë™/ì •, ì‘/ì„¸, ì¼ì§„/ê³µë§ì„ í†µí•© íŒë….',},{id:'ì ˆì°¨5',label:'í•´ì„ ì ˆì°¨',content:['â‘  ì§ˆë¬¸ ë‹¨ì¼í™”(ì¡°ê±´/ê¸°í•œ/ì„±ê³µ ê¸°ì¤€)','â‘¡ íš¨ íŒë…(ë™Â·ì •, ìƒê·¹/ì¶©ê·¹, ê³µë§/ì¼ì§„)','â‘¢ ì‘Â·ì„¸ ì¶•ì˜ ì—­ë™ì„±(ì£¼ë„/íƒ€ì´ë°)','â‘£ ë³€ê´˜/í•©ê´˜ë¡œ ê²°ê³¼ ê²½í–¥ ì˜ˆì¸¡',],},{id:'íŒì •5',label:'íŒì • ê·œì¹™(ì˜ˆì‹œ)',content:['ì‘ ê°•Â·ì„¸ ì•½ â†’ ì™¸ë¶€ ë³€ìˆ˜ ì£¼ë„(ì¶”ê°€ íŠ¸ë¦¬ê±° í•„ìš”)','ê³µë§+ì¼ì§„ ì¶© â†’ ì§€ì—°/ë³´ë¥˜ ê°€ëŠ¥ì„±â†‘','ìš©ì‹  íš¨ ìƒì¡° & ì›ì‹  ë°©í•´ ì ìŒ â†’ ì¶”ì§„ ì‹ í˜¸',],},{id:'ì‚¬ë¡€5',label:'ì‚¬ë¡€/ì ìš©',content:['í”„ë¡œì íŠ¸ Go/No-Go: ê±´â†’íƒœ ì „í™˜ êµ¬ê°„ì— ìžì› ë³´ê°• í›„ ì¶”ì§„','ì±„ìš©: ìž¬ì„± ê³¼ìž‰ì´ë©´ ê¸°ëŒ€ì¹˜Â·ë³´ìƒ ìž¬ì¡°ì •',],},{id:'ì²´í¬5',label:'ì²´í¬/ë¦¬ìŠ¤í¬',content:['ì‚¬í›„í•©ë¦¬í™” ë°©ì§€: ì„ í–‰ ê°€ì„¤ ê¸°ë¡','ë‹¤ì¤‘ ì§ˆë¬¸ ê¸ˆì§€: 1ì§ˆë¬¸ 1íŒì •',],},],},{title:'ìžë¯¸ë‘ìˆ˜(ç´«å¾®æ–—æ•¸)',note:'ëª…ë°˜/ê¶ì„±',defaultOpen:true,sections:[{id:'ê°œìš”6',label:'ê°œìš”',content:'ì£¼ì„±(ìžë¯¸Â·ì²œê¸°Â·íƒœì–‘)+ë³´ì¢Œì„±, 12ê¶ ìƒí˜¸ì „ì´ë¥¼ í†µí•©í•´ ì»¤ë¦¬ì–´/ê´€ê³„/ê±´ê°• ì „ëžµ ì„¤ê³„.',},{id:'í”„ë ˆìž„6',label:'í•´ì„ í”„ë ˆìž„',content:['ì£¼ì„±(í•µì‹¬ ë™ë ¥)â†”ë¶€ì„±(ë³´ì • ìž¥ì¹˜) ìƒí˜¸ìž‘ìš©','ê¶ê°„ ì´ë™ê³¼ ìš´ì˜ êµì°¨ì—ì„œ ì—­í•  ì „í™˜ í¬ì¸íŠ¸ ì‹ë³„',],},{id:'íŒì •6',label:'íŒì • ê¸°ì¤€',content:['ëª…ê¶Â·ê´€ë¡Â·ìž¬ë°±Â·ë³µë• ë°¸ëŸ°ì‹± 60/40 ì´ë‚´ â†’ ì•ˆì •','ëŒ€ìš´: ëª…ê¶ ë³´ê°• + ì—°ìš´: ê´€ë¡ ê°•í™” â†’ ìŠ¹ì§„/ì „í™˜ ì°½',],},{id:'ì²´í¬6',label:'ì²´í¬ë¦¬ìŠ¤íŠ¸',content:['ëª…ê¶-ë³µë• ë¶ˆê· í˜•: íšŒë³µíƒ„ë ¥ ë£¨í‹´ ë„ìž…','í˜•ì œ/ë…¸ë³µê¶ ê³¼ìž‰ ê°œìž…: ê²½ê³„Â·ì—­í•  ì •ì˜',],},{id:'ì£¼ì„6',label:'í•™íŒŒ ì°¨ì´/ì£¼ì„',content:'ë°°ì¹˜/í•´ì„ ë¶„íŒŒ ì°¨ì´ëŠ” ì£¼ì„ ë³‘ê¸°, ì¼€ì´ìŠ¤ì— ë³‘ë ¬ í‘œê¸°.',},],},{title:'ê¸°ë¬¸ë‘”ê°‘',note:'ì „ëžµÂ·ë°°ì¹˜',sections:[{id:'ê°œìš”7',label:'ê°œìš”',content:'ì²œÂ·ì§€Â·ì¸ë°˜, 9ê¶ ë°°ì¹˜ë¡œ ì‹œê³µê°„ ìœ ë¶ˆë¦¬ë¥¼ í‰ê°€. â€˜ë°°ì¹˜Ã—íƒ€ì´ë°â€™ì˜ ê³±ì´ íš¨ê³¼ë¥¼ ì¢Œìš°.',},{id:'ëª¨ë¸7',label:'ëª¨ë¸/ì›ë¦¬',content:['ë¬¸/ì„±/ì‹  ìƒí˜¸ìž‘ìš©ìœ¼ë¡œ ê²½ë¡œë¹„ìš© ìµœì†Œí™”','ê¸¸í‰ë¬¸ ë°°ì¹˜ì— ë”°ë¥¸ ì¢Œì„Â·ë™ì„ Â·ìˆœì„œ ìµœì í™”',],},{id:'ì ìš©7',label:'ì ìš©',content:['í˜‘ìƒ: ê¸¸ë¬¸ ë°©í–¥ ë°œí‘œ/ì°©ì„, í‰ë¬¸ì€ ë°±ì—… ê²½ë¡œ','ì¶œì‹œ: ì‹œë¬¸ ê°•í•œ ì‹œê°„ëŒ€ì— PR ì§‘ì¤‘',],},{id:'ì²´í¬7',label:'ë¦¬ìŠ¤í¬/ì²´í¬',content:['ìƒì§• ê³¼ë„í™” ê¸ˆì§€, ì˜ˆì‚°Â·ì‹œê°„ ì œì•½ê³¼ ê²°í•©','ì‹¤í—˜ ê³„íš: ì‚¬ì „ ê°€ì„¤â†’ì‹¤í–‰â†’í›„ê²€ì¦',],},],},{title:'ë§¤í™”ì—­ìˆ˜',note:'ê°„ëª…/ì§ê´€',sections:[{id:'ê°œìš”8',label:'ê°œìš”',content:'ì‹œê°„Â·ê³µê°„Â·ìˆ«ìž ì‹ í˜¸ì—ì„œ í•µì‹¬ ìƒì§•ì„ ì¶”ì¶œí•´ ê°„ëª…í•˜ê²Œ íŒë‹¨.',},{id:'ì ˆì°¨8',label:'ì ˆì°¨/ê°€ì´ë“œ',content:['í•µì‹¬ ìƒì§• 2~3ê°œë§Œ ì œí•œ(ê³¼ì í•© ë°©ì§€)','ìœ ì‚¬ì‚¬ë¡€ ëŒ€ì¡°ë¡œ ìž¬í˜„ì„± ê²€í† ',],},{id:'í™œìš©8',label:'í™œìš©',content:'ì§§ì€ ì˜ì‚¬ê²°ì •Â·ì¼ìƒ ì„ íƒÂ·ì´ˆì‹¬ìž êµìœ¡ í”„ë ˆìž„.',},{id:'ì²´í¬8',label:'ì²´í¬',content:['í™•ì¦íŽ¸í–¥ ê²½ê³„, ê²°ê³¼ ê¸°ë¡','ìƒì§• ì¶©ëŒ ì‹œ ì—°ê²°ê³ ë¦¬ ì—†ëŠ” ìš”ì†Œ ì œê±°',],},],},{title:'ì •ì—­/ì²´ìš©',note:'ì´ë¡  ì‹¬í™”',sections:[{id:'í”„ë ˆìž„9',label:'ì²´Â·ìš© í”„ë ˆìž„',content:'ì²´(ë¶ˆë³€)ì™€ ìš©(ê°€ë³€)ì„ ë¶„ë¦¬í•´ ë¶ˆí™•ì‹¤ì„± í•˜ì—ì„œ ì˜µì…˜ì„± ìœ ì§€.',},{id:'í˜„ëŒ€9',label:'í˜„ëŒ€ì  ì ìš©',content:['ì‹œë®¬ë ˆì´ì…˜(what-if) + ì‹¤í—˜ì  ì ‘ê·¼','ì˜¤ë¥˜ ë¹„ìš© í° ìƒí™©: ë³µìˆ˜ ì˜µì…˜ ë³‘í–‰',],},{id:'ì²´í¬9',label:'ì²´í¬',content:['ì²´ ê°€ì • ë³€ê²½ ì‹œ, ëª¨ë“  ìš© ì‹œë‚˜ë¦¬ì˜¤ ìž¬í‰ê°€','ìš© ì‹œë‚˜ë¦¬ì˜¤ 2ê°œ ì´ìƒ ë³‘í–‰ ìš´ì˜',],},],},],},{category:'ê´€ìƒÂ·ìˆ˜ìƒÂ·í’ìˆ˜',desc:'í˜•íƒœÂ·ë¹„ìœ¨Â·ë°°ì¹˜ë¥¼ íŽ¸í–¥ ì—†ì´ ê´€ì°°í•´ ê²½í–¥ì„±ì„ ì¶”ì •. ëª©ì ì€ ìƒì§• ë‹¨ì •ì´ ì•„ë‹Œ í™˜ê²½/í–‰ë™ ê°œì„ .',chips:['ë¹„ìœ¨/ê°ë„','ì†ê¸ˆ/í˜•ìƒ','ë°°ì¹˜/ë™ì„ ','íŽ¸í–¥ ìµœì†Œí™”','ì‹¤ìš© ê²°í•©','ì¸¡ì • ì§€í‘œ',],subs:[{title:'ê´€ìƒ(Physiognomy)',note:'ì´ëª©êµ¬ë¹„/ë¹„ìœ¨',sections:[{id:'ê°œìš”10',label:'ê°œìš”',content:'ìƒÂ·ì¤‘Â·í•˜ì • ë¹„ìœ¨Â·ëŒ€ì¹­ì„±Â·ê°ë„/ë³¼ë¥¨ ì§€í‘œë¡œ ì—ë„ˆì§€ ë¶„ë°° ê²½í–¥ì„ ê´€ì°°(ë¬¸í™”Â·ìƒë¬¼ ë‹¤ì–‘ì„± ê³ ë ¤).',},{id:'ì§„ë‹¨10',label:'ì§„ë‹¨ í¬ì¸íŠ¸',content:['ìƒì •(ë¹„ì „/ì¸ì§€)Â·ì¤‘ì •(ì‹¤í–‰/ì†Œí†µ)Â·í•˜ì •(ì§€ì§€/ì§€êµ¬ë ¥)ì˜ ê· í˜•','ë¹„ëŒ€ì¹­ í¬ë©´ ë³´ì •: í¬ì¦ˆÂ·ì¡°ëª…Â·ë Œì¦ˆ ì™œê³¡Â·ìŠ¤íŠ¸ë ˆìŠ¤ ë³€ìˆ˜ í™•ì¸',],},{id:'í™œìš©10',label:'í™œìš©',content:['ëŒ€ì™¸ ì´ë¯¸ì§€/ì†Œí†µ ì „ëžµ ì¡°ì •','í”¼ë¡œ/ìŠ¤íŠ¸ë ˆìŠ¤ ì‹ í˜¸ ê°ì§€â†’ìžê¸°ê´€ë¦¬ ë£¨í‹´',],},{id:'ìœ¤ë¦¬10',label:'ìœ¤ë¦¬/íŽ¸í–¥',content:['ê³ ì •ê´€ë…Â·ì°¨ë³„ ìœ ë°œ ê¸ˆì§€','ì¶”ì •ì€ ê²½í–¥ì„±ì¼ ë¿ ë‹¨ì • ê¸ˆì§€',],},],},{title:'ìˆ˜ìƒ(Palmistry)',note:'ìƒëª…/ì‹¬ìž¥/ë‘ë‡Œì„ ',sections:[{id:'ê°œìš”11',label:'ê°œìš”',content:'ì„ (ê¸¸ì´Â·ê¹Šì´Â·ë¶„ì§€Â·êµì°¨)+í˜•íƒœ/ì˜¨ê¸° ë“± ì´‰ê° ì •ë³´ë¡œ ì—ë„ˆì§€/ìŠ¤íŠ¸ë ˆìŠ¤ ê²½í–¥ ì¶”ì •.',},{id:'íŒì •11',label:'íŒì • ê¸°ì¤€',content:['ì‹¬ìž¥ì„  ë‹¨ì ˆÂ·ë¶„ì§€ ê³¼ë‹¤ â†’ ì •ì„œ ê¸°ë³µÂ·ëŒ€ì¸ í”¼ë¡œ','ë‘ë‡Œì„  ì„¬ì„¸Â·ìž¥ê±°ë¦¬ â†’ ëª°ìž…/ì§€ì—° ê²½í–¥(ë§ˆê° ê´€ë¦¬)',],},{id:'í™œìš©11',label:'í™œìš©',content:['ìˆ˜ë©´Â·í˜¸í¡Â·ìš´ë™ ë£¨í‹´ ì¶”ì²œ','ì—…ë¬´ ë°°ì¹˜(ì§‘ì¤‘ vs ìƒí˜¸ìž‘ìš©) ì¡°ì •',],},{id:'ì²´í¬11',label:'ì²´í¬/ìœ¤ë¦¬',content:['ì˜ˆì–¸ ê¸ˆì§€, ìƒí™œë””ìžì¸ ë³´ì¡° ê°•ì¡°','ê°œì¸ ë¯¼ê°ì •ë³´ ë³´í˜¸',],},],},{title:'í’ìˆ˜(Feng Shui)',note:'ì±„ê´‘/í†µí’/ë™ì„ ',sections:[{id:'ê°œìš”12',label:'ê°œìš”',content:'ì±„ê´‘Â·í†µí’Â·ì†ŒìŒÂ·ë™ì„  í’ˆì§ˆì„ ê°œì„ í•´ ì§‘ì¤‘/íšŒë³µ ê¸°ë°˜ êµ¬ì¶•.',},{id:'ì•Œê³ ë¦¬ì¦˜12',label:'ê°œì„  ì•Œê³ ë¦¬ì¦˜',content:['â‘  ë¬¸ì œ ì •ì˜(ë¹›/ê³µê¸°/ì†ŒìŒ/ë™ì„ )','â‘¡ ë ˆì´ì•„ì›ƒ ì‹œë®¬ë ˆì´ì…˜(ì¶©ëŒ/ê±°ë¦¬ ìµœì†Œ)','â‘¢ ë¯¸ì„¸ íŠœë‹(ì‹ë¬¼Â·í¡ìŒÂ·ìƒ‰ì˜¨ë„Â·íŒ¨ë¸Œë¦­)',],},{id:'ì§€í‘œ12',label:'ì¸¡ì • ì§€í‘œ',content:['ì¡°ë„(lux)/í™˜ê¸°(COâ‚‚ ppm)/ì†ŒìŒ(dB)/ë™ì„  ì¶©ëŒ(ê±´Â·ì¼)','2ì£¼ ê°„ê²© ì¸¡ì •â†’ê°œì„ ',],},{id:'ì²´í¬12',label:'ì²´í¬/ì£¼ì˜',content:['ì‹¬ë¯¸ì„±>ê¸°ëŠ¥ ì—­ì „ ê¸ˆì§€','ê³¼ë„í•œ ìƒì§• í•´ì„ ê¸ˆì§€'],},],},],},{category:'ì‹¬ë¦¬ìƒë‹´ & ì‹¬ë¦¬ì¹˜ìœ ',desc:'ì§„ë‹¨â€“ê°œìž…â€“í‰ê°€ë¥¼ í‘œì¤€í™”. ì—­í•™ í•´ì„ì€ ìƒë‹´ ê°€ì„¤ ë³´ì¡°ë¡œ ì œí•œ. ì•ˆì „Â·ìœ¤ë¦¬ ìš°ì„ .',chips:['CBT','ì •ì‹ ì—­ë™','EMDR/ë…¸ì¶œ','í‰ê°€ë„êµ¬','ìœ¤ë¦¬/ì•ˆì „','ì„±ê³¼ ì§€í‘œ',],subs:[{title:'ì¸ì§€í–‰ë™ì¹˜ìœ (CBT)',note:'ìž¬êµ¬ì¡°í™”/ë…¸ì¶œ/ì‹¤í—˜',sections:[{id:'ê°œìš”13',label:'ê°œìš”',content:'ìžë™ì‚¬ê³ â€“í•µì‹¬ì‹ ë…â€“í–‰ë™ì˜ ì—°ê²°ì„ ê°€ì„¤í™”, ì‹¤í—˜ìœ¼ë¡œ ê²€ì¦/ìˆ˜ì •.',},{id:'ê¸°ë²•13',label:'í•µì‹¬ ê¸°ë²•',content:['ì¸ì§€ ìž¬êµ¬ì„±(ì¦ê±°Â·ëŒ€ì•ˆÂ·ì´ë“/ì†ì‹¤ ë¶„ì„)','í–‰ë™ ì‹¤í—˜(ì˜ˆì¸¡â†’ì‹¤í–‰â†’ì¸¡ì •â†’í•™ìŠµ)','ë…¸ì¶œ/ë°˜ì‘ë°©ì§€(íšŒí”¼ ë£¨í”„ í•´ì²´)',],},{id:'í”„ë¡œí† ì½œ13',label:'í”„ë¡œí† ì½œ/ì§€í‘œ',content:['ì„¸ì…˜ ëª©í‘œ, ê³¼ì œ ì´í–‰ë¥ , ì¦ìƒ ì ìˆ˜(BDI/BAI ë“±)','í–‰ë™ í™œì„±í™”: ì£¼ë‹¹ í™œë™ëŸ‰/ë§Œì¡±ë„',],},{id:'ì²´í¬13',label:'ë¦¬ìŠ¤í¬/ì£¼ì˜',content:['ìžê°€ë…¸ì¶œ ì‹œ ì•ˆì „ê³„íšÂ·ì—­ì¹˜ ê´€ë¦¬','ë³µí•© ì™¸ìƒ: ì•ˆì •í™”â†’ì²˜ë¦¬â†’í†µí•© ë‹¨ê³„',],},],},{title:'ì •ì‹ ì—­ë™ì  ì¹˜ìœ ',note:'íŒ¨í„´/í†µì°°',defaultOpen:true,sections:[{id:'ê°œìš”14',label:'ê°œìš”',content:'ì´ˆê¸° ê´€ê³„ ê²½í—˜ê³¼ ë°˜ë³µ íŒ¨í„´ íƒìƒ‰. â€˜ëŠë‚Œâ€“ì˜ë¯¸â€“í–‰ë™â€™ ì—°ê²° ìž¬êµ¬ì„±.',},{id:'ìž‘ì—…14',label:'í•µì‹¬ ìž‘ì—…',content:['ì „ì´/ì—­ì „ì´ ì¸ì‹Â·í™œìš©(ì—¬ê¸°-ì§€ê¸ˆ)','ë°©ì–´ê¸°ì œ ì‹ë³„â†’ì ì‘ì  ë°©ì–´ë¡œ ì „í™˜','ì •ì„œëª…ëª…Â·ë©”íƒ€ì¸ì§€ í™•ìž¥',],},{id:'ì§€í‘œ14',label:'ì„±ê³¼ ì§€í‘œ',content:['ê°ˆë“± ë¹ˆë„Â·í•´ê²° ì‹œê°„, ìžì¡´ê° ë³€ë™í­','ì„¸ì…˜ ë‚´ í†µì°°/ì •ì„œí‘œí˜„ ë¹ˆë„',],},{id:'ìœ¤ë¦¬14',label:'ìœ¤ë¦¬/ê²½ê³„',content:['ì—­í•™ í”„ë ˆìž„ê³¼ ì¹˜ìœ  í”„ë ˆìž„ í˜¼ì„  ê¸ˆì§€','ì¹˜ìœ ì  ê²°ì •ì€ ìž„ìƒ ê¸°ì¤€ ìš°ì„ ',],},],},{title:'EMDRÂ·ë…¸ì¶œì¹˜ìœ ',note:'ì™¸ìƒ/íƒˆê°ìž‘',sections:[{id:'ë‹¨ê³„15',label:'ë‹¨ê³„',content:'ì•ˆì •í™”â†’í‘œì  ì„ ì •â†’ìž¬ì²˜ë¦¬â†’í†µí•©. ì ‘ì´‰Â·ì•ˆì „ ì‹ í˜¸ ì‚¬ì „ êµ¬ì¶•.',},{id:'í”„ë¡œí† ì½œ15',label:'í”„ë¡œí† ì½œ/ì§€í‘œ',content:['SUDS/VOC ì¶”ì , í”Œëž˜ì‹œë°± ë¹ˆë„Â·ê°•ë„','ë…¸ì¶œ ê³„ì¸µí‘œ ìž‘ì„±â†’ì ì§„ì  ìƒìŠ¹',],},{id:'ì²´í¬15',label:'ë¦¬ìŠ¤í¬/ì£¼ì˜',content:['ìž¬ì™¸ìƒí™” ë°©ì§€(ì§„ì • ìŠ¤í‚¬ í™•ë³´ í›„ ì§„í–‰)','ì„¸ì…˜ ì¢…ë£Œ ì „ ì•ˆì •í™” ë£¨í‹´ í•„ìˆ˜',],},],},{title:'í‰ê°€ë„êµ¬/í”„ë¡œí† ì½œ',note:'MMPI/BDI/DSM-5',sections:[{id:'ë„êµ¬16',label:'ë„êµ¬',content:'í‘œì¤€í™” ê²€ì‚¬+ìž„ìƒë©´ë‹´+í–‰ë™ì§€í‘œ(ë‹¤ì›ì )ë¡œ ì§„ë‹¨Â·ê³„íš ë³´ê°•.',},{id:'ìš´ì˜16',label:'ìš´ì˜ ì²´í¬ë¦¬ìŠ¤íŠ¸',content:['ë™ì˜Â·ë¹„ë°€ë³´ìž¥Â·ê²½ê³„ ëª…ì‹œ','ëª©í‘œâ€“ì§€í‘œâ€“ì£¼ê¸°(2~4ì£¼) ì„¤ì •Â·ë¦¬ë·°',],},{id:'ìœ¤ë¦¬16',label:'ìœ¤ë¦¬/ë°ì´í„°',content:['ë¯¼ê°ì •ë³´ ìµœì†Œ ìˆ˜ì§‘Â·ë³´ê´€ì£¼ê¸° ëª…ì‹œ','ìž„ìƒì  í•œê³„Â·ì˜ë¢° ê¸°ì¤€ íˆ¬ëª…í™”',],},],},],},];const app=document.getElementById('app');const sideNav=document.getElementById('sideNav');const catPills=document.getElementById('catPills');function h(tag,attrs={},...children){const el=document.createElement(tag);Object.entries(attrs||{}).forEach(([k,v])=>{if(k==='class')el.className=v;else if(k==='html')el.innerHTML=v;else if(k.startsWith('on')&&typeof v==='function')
el.addEventListener(k.slice(2),v);else el.setAttribute(k,v);});children.flat().forEach((c)=>{if(c==null)return;if(typeof c==='string')el.appendChild(document.createTextNode(c));else el.appendChild(c);});return el;}
function anchor(cat,sub){return slugify(cat)+'-'+slugify(sub);}
function renderContent(){app.innerHTML='';DATA.forEach((cat)=>{const box=h('div',{class:'category','data-cat':slugify(cat.category),});const head=h('div',{class:'cat-header',tabindex:'0'},h('div',{class:'cat-title'},cat.category),h('div',{class:'muted'},'â€” ',cat.desc.split('.')[0]),h('svg',{class:'chev',width:'18',height:'18',viewBox:'0 0 24 24',html:'<path fill="currentColor" d="M6 9l6 6 6-6"/>',}));const panel=h('div',{class:'cat-panel'});const desc=h('div',{class:'cat-desc'},cat.desc);const bar=h('div',{class:'toolbar'},...(cat.chips||[]).map((c)=>h('span',{class:'chip'},c)));const subWrap=h('div',{class:'sub'});(cat.subs||[]).forEach((sub)=>{const id=anchor(cat.category,sub.title);const btn=h('button',{class:'sub-acc',id:'a-'+id,'data-anchor':id,});btn.append(h('span',{class:'sub-title'},sub.title),h('span',{class:'sub-note'},sub.note||''),h('svg',{class:'sub-chevron',width:'16',height:'16',viewBox:'0 0 24 24',html:'<path fill="currentColor" d="M6 9l6 6 6-6"/>',}));if(sub.defaultOpen)btn.setAttribute('data-default-open','');const sp=h('div',{class:'sub-panel','data-anchor':id});const sc=h('div',{class:'sub-content'});const toc=h('div',{class:'toc'});sc.appendChild(toc);(sub.sections||[]).forEach((sec)=>{toc.appendChild(h('a',{href:'#'+slugify(sec.id)},sec.label));});(sub.sections||[]).forEach((sec)=>{sc.appendChild(h('h4',{id:slugify(sec.id)},sec.label));if(Array.isArray(sec.content)){const ul=h('ul',null,sec.content.map((x)=>h('li',null,x)));sc.appendChild(ul);}else{sc.appendChild(h('p',null,sec.content));}});sp.appendChild(sc);subWrap.append(btn,sp);});panel.append(desc,bar,subWrap);box.append(head,panel);app.appendChild(box);});}
function renderTopPills(){catPills.innerHTML='';DATA.forEach((cat,idx)=>{const p=h('button',{class:'pill','data-cat':slugify(cat.category)},cat.category);if(idx===0)p.classList.add('active');p.addEventListener('click',()=>{document.querySelectorAll('.pill').forEach((x)=>x.classList.remove('active'));p.classList.add('active');const box=document.querySelector(`.category[data-cat="${slugify(cat.category)}"]`);const head=box.querySelector('.cat-header');openPanel(box.querySelector('.cat-panel'),head);box.scrollIntoView({behavior:'smooth',block:'start'});});catPills.appendChild(p);});}
function openSidebarCat(catKey,exclusive=true){const target=Array.from(document.querySelectorAll('.s-cat')).find((c)=>c.dataset.cat===catKey);if(!target)return;if(exclusive){document.querySelectorAll('.s-cat').forEach((c)=>{if(c!==target)c.classList.remove('open');});}
target.classList.toggle('open');}
function renderSideNav(){sideNav.innerHTML='';DATA.forEach((cat)=>{const catKey=slugify(cat.category);const wrap=h('div',{class:'s-cat','data-cat':catKey});const head=h('div',{class:'s-cat-head',tabindex:'0',title:'ì¤‘ë¶„ë¥˜ ë³´ê¸°/ìˆ¨ê¸°ê¸°'},h('span',{class:'dot'}),h('span',{class:'label'},cat.category),h('svg',{class:'chev',width:'14',height:'14',viewBox:'0 0 24 24',html:'<path fill="currentColor" d="M9 6l6 6-6 6"/>',}));head.addEventListener('click',()=>openSidebarCat(catKey,true));head.addEventListener('keydown',(e)=>{if(e.key==='Enter'||e.key===' '){e.preventDefault();openSidebarCat(catKey,true);}});const subs=h('div',{class:'s-sub'});(cat.subs||[]).forEach((sub)=>{const id=anchor(cat.category,sub.title);const link=h('a',{href:'#','data-anchor':id,class:'s-link'},sub.title);link.addEventListener('click',(e)=>{e.preventDefault();document.querySelectorAll('.s-cat').forEach((c)=>c.classList.remove('open'));wrap.classList.add('open');openByAnchor(id,true);});subs.appendChild(link);});wrap.append(head,subs);sideNav.appendChild(wrap);});}
function togglePanel(panel,btn){const isOpen=panel.style.maxHeight&&panel.style.maxHeight!=='0px';if(isOpen){closePanel(panel,btn);}else{openPanel(panel,btn);}}
function openPanel(panel,btn){if(panel){panel.style.maxHeight=panel.scrollHeight+'px';}
if(btn){btn.classList.add('open');}}
function closePanel(panel,btn){if(panel){panel.style.maxHeight=null;}
if(btn){btn.classList.remove('open');}}
function openDefaults(){console.log('ðŸ“‚ ê¸°ë³¸ íŽ¼ì¹¨ í•­ëª© ì—´ê¸° ì‹œìž‘');const defaultBtns=document.querySelectorAll('.sub-acc[data-default-open]');console.log(`ðŸ” ê¸°ë³¸ íŽ¼ì¹¨ í•­ëª© ê°œìˆ˜:${defaultBtns.length}`);defaultBtns.forEach((btn)=>{const panel=btn.nextElementSibling;if(panel&&panel.classList.contains('sub-panel')){panel.style.maxHeight=panel.scrollHeight+'px';btn.classList.add('open');const subChev=btn.querySelector('.sub-chevron');if(subChev)subChev.style.transform='rotate(180deg)';}
const catPanel=btn.closest('.cat-panel');if(catPanel){const catHead=catPanel.previousElementSibling;if(catHead&&catHead.classList.contains('cat-header')){catPanel.style.maxHeight=catPanel.scrollHeight+'px';catHead.classList.add('open');const chev=catHead.querySelector('.chev');if(chev)chev.style.transform='rotate(180deg)';}}});console.log('âœ… ê¸°ë³¸ íŽ¼ì¹¨ í•­ëª© ì—´ê¸° ì™„ë£Œ');}
const q=document.getElementById('q');function stripMarks(el){el.querySelectorAll('mark').forEach((m)=>{const parent=m.parentNode;parent.replaceChild(document.createTextNode(m.textContent),m);parent.normalize();});}
function highlightText(el,term){if(!term)return;const walker=document.createTreeWalker(el,NodeFilter.SHOW_TEXT,{acceptNode(n){if(!n.nodeValue.trim())return NodeFilter.FILTER_REJECT;const p=n.parentNode?.tagName;if(p==='SCRIPT'||p==='STYLE')
return NodeFilter.FILTER_REJECT;return NodeFilter.FILTER_ACCEPT;},});const re=new RegExp(term.replace(/[.*+?^${}()|[\]\\]/g,'\\$&'),'gi');const nodes=[];while(walker.nextNode())nodes.push(walker.currentNode);nodes.forEach((n)=>{const t=n.nodeValue;if(!re.test(t))return;const frag=document.createDocumentFragment();let last=0;t.replace(re,(m,i)=>{frag.appendChild(document.createTextNode(t.slice(last,i)));const mark=document.createElement('mark');mark.textContent=m;frag.appendChild(mark);last=i+m.length;});frag.appendChild(document.createTextNode(t.slice(last)));n.parentNode.replaceChild(frag,n);});}
function setCount(text){let c=document.querySelector('.top .count');if(!c){c=document.createElement('div');c.className='count';document.querySelector('.top-inner').appendChild(c);}
c.textContent=text;}
function filter(){const term=q.value.trim();let shown=0;document.querySelectorAll('.sub-content,.sub-acc,.cat-header,.cat-panel').forEach((el)=>el.classList.remove('hide'));document.querySelectorAll('.sub-content').forEach(stripMarks);if(!term){document.querySelectorAll('.sub-acc:not([data-default-open])').forEach((b)=>closePanel(b.nextElementSibling,b));document.querySelectorAll('.category').forEach((cat)=>{const p=cat.querySelector('.cat-panel');if(p&&p.style.maxHeight){p.style.maxHeight=p.scrollHeight+'px';}});saveState();return;}
document.querySelectorAll('.category').forEach((cat)=>{let catHit=false;cat.querySelectorAll('.sub-acc').forEach((btn)=>{const panel=btn.nextElementSibling;const hay=(btn.textContent+
' '+
panel.textContent).toLowerCase();const hit=hay.includes(term.toLowerCase());if(hit){btn.classList.remove('hide');panel.classList.remove('hide');openPanel(panel,btn);highlightText(panel,term);highlightText(btn,term);catHit=true;shown++;}else{btn.classList.add('hide');panel.classList.add('hide');closePanel(panel,btn);}});const head=cat.querySelector('.cat-header');const p=cat.querySelector('.cat-panel');if(catHit){head.classList.remove('hide');openPanel(p,head);}else{head.classList.add('hide');p.classList.add('hide');closePanel(p,head);}});setCount(shown?`ì¼ì¹˜ í•­ëª©:${shown}ê°œ ì¤‘ë¶„ë¥˜`:'ì¼ì¹˜ ì—†ìŒ');saveState();}
q.addEventListener('input',filter);q.addEventListener('change',filter);window.addEventListener('keydown',(e)=>{if(e.key==='/'&&document.activeElement.tagName!=='INPUT'){e.preventDefault();q.focus();}});document.getElementById('btn-expand').onclick=expandAll;document.getElementById('btn-collapse').onclick=collapseAll;document.getElementById('btn-reset').onclick=function(){console.log('ðŸ”„ ê¸°ë³¸ íŽ¼ì¹¨ìœ¼ë¡œ ë¦¬ì…‹ ì‹œìž‘');collapseAll();setTimeout(()=>{openDefaults();console.log('âœ… ê¸°ë³¸ íŽ¼ì¹¨ ì™„ë£Œ');},100);q.value='';history.pushState('',document.title,window.location.pathname+window.location.search);setTimeout(()=>{saveState();},150);};document.getElementById('sideExpand').onclick=expandAll;document.getElementById('sideCollapse').onclick=collapseAll;function expandAll(){console.log('ðŸ”“ ëª¨ë‘ íŽ¼ì¹˜ê¸° ì‹œìž‘');document.querySelectorAll('.category').forEach((cat)=>{const catPanel=cat.querySelector('.cat-panel');const catHeader=cat.querySelector('.cat-header');if(catPanel&&catHeader){catPanel.style.maxHeight=catPanel.scrollHeight+'px';catHeader.classList.add('open');const chev=catHeader.querySelector('.chev');if(chev)chev.style.transform='rotate(180deg)';}
cat.querySelectorAll('.sub-acc').forEach((btn)=>{const panel=btn.nextElementSibling;if(panel&&panel.classList.contains('sub-panel')){panel.style.maxHeight=panel.scrollHeight+'px';btn.classList.add('open');const subChev=btn.querySelector('.sub-chevron');if(subChev)subChev.style.transform='rotate(180deg)';}});});console.log('âœ… ëª¨ë‘ íŽ¼ì¹˜ê¸° ì™„ë£Œ');saveState();}
function collapseAll(){console.log('ðŸ”’ ëª¨ë‘ ì ‘ê¸° ì‹œìž‘');document.querySelectorAll('.category').forEach((cat)=>{const catPanel=cat.querySelector('.cat-panel');const catHeader=cat.querySelector('.cat-header');cat.querySelectorAll('.sub-acc').forEach((btn)=>{const panel=btn.nextElementSibling;if(panel&&panel.classList.contains('sub-panel')){panel.style.maxHeight='0';btn.classList.remove('open');const subChev=btn.querySelector('.sub-chevron');if(subChev)subChev.style.transform='rotate(0deg)';}});if(catPanel&&catHeader){catPanel.style.maxHeight='0';catHeader.classList.remove('open');const chev=catHeader.querySelector('.chev');if(chev)chev.style.transform='rotate(0deg)';}});console.log('âœ… ëª¨ë‘ ì ‘ê¸° ì™„ë£Œ');saveState();}
function openByHash(){const h=decodeURIComponent(location.hash||'').replace(/^#/,'');if(!h)return false;return openByAnchor(h,true,true);}
function openByAnchor(id,scroll,updateHash){const btn=document.querySelector(`.sub-acc[data-anchor="${id}"]`);if(!btn)return false;const catPanel=btn.closest('.cat-panel');const catHead=catPanel.previousElementSibling;openPanel(catPanel,catHead);openPanel(btn.nextElementSibling,btn);if(scroll){document.getElementById('sidebar')?.classList.remove('open');scrollInto(btn);}
if(updateHash)location.hash='#'+id;const catKey=id.split('-')[0];document.querySelectorAll('.s-cat').forEach((c)=>c.classList.toggle('open',c.dataset.cat===catKey));saveState();setActiveAnchor(id);return true;}
function scrollInto(el){const topPad=130;const r=el.getBoundingClientRect();window.scrollTo({top:window.scrollY+r.top-topPad,behavior:'smooth',});}
window.addEventListener('hashchange',()=>{if(openByHash())saveState();});let currentAnchor='';function setActiveAnchor(id){currentAnchor=id;document.querySelectorAll('.s-link').forEach((l)=>l.classList.toggle('active',l.dataset.anchor===id));if(id){const catKey=id.split('-')[0];document.querySelectorAll('.s-cat').forEach((c)=>{c.classList.toggle('active',c.dataset.cat===catKey);c.classList.toggle('open',c.dataset.cat===catKey);});document.querySelectorAll('.pill').forEach((p)=>p.classList.toggle('active',p.dataset.cat===catKey));document.querySelectorAll('.sub-acc').forEach((b)=>b.classList.toggle('focus',b.dataset.anchor===id));}}
function highlightActiveNav(){setActiveAnchor(currentAnchor||decodeURIComponent(location.hash||'').replace(/^#/,''));}
const themeBtn=document.getElementById('themeBtn');const THEME_KEY='lifetree_theme_v1';function setTheme(t){document.documentElement.setAttribute('data-theme',t);try{localStorage.setItem(THEME_KEY,t);}catch(e){}}
function nextTheme(cur){const order=['light','dark','pastel'];const i=Math.max(0,order.indexOf(cur));return order[(i+1)%order.length];}
themeBtn.addEventListener('click',()=>{const cur=document.documentElement.getAttribute('data-theme')||'dark';setTheme(nextTheme(cur));});const LS_KEY='lifetree_state_v8';function saveState(){const openSubs=Array.from(document.querySelectorAll('.sub-acc.open')).map((b)=>b.dataset.anchor);const openCats=Array.from(document.querySelectorAll('.cat-header.open')).map((h)=>h.parentElement.querySelector('.cat-title').textContent.trim()).map(slugify);const theme=document.documentElement.getAttribute('data-theme');const qVal=q.value;const openSideCats=Array.from(document.querySelectorAll('.s-cat.open')).map((el)=>el.dataset.cat);try{localStorage.setItem(LS_KEY,JSON.stringify({openSubs,openCats,q:qVal,theme,anchor:currentAnchor,openSideCats,}));}catch(e){}}
function restoreState(){try{const raw=localStorage.getItem(LS_KEY);if(!raw){document.querySelectorAll('.s-cat').forEach((c)=>{c.classList.toggle('open',SIDEBAR_DEFAULT_OPEN.includes(c.dataset.cat));});return false;}
const st=JSON.parse(raw);if(st.theme)setTheme(st.theme);if(st.q)q.value=st.q;document.querySelectorAll('.category').forEach((cat)=>{closePanel(cat.querySelector('.cat-panel'),cat.querySelector('.cat-header'));cat.querySelectorAll('.sub-acc').forEach((b)=>closePanel(b.nextElementSibling,b));});if(st.openCats?.length){document.querySelectorAll('.category').forEach((cat)=>{const title=slugify(cat.querySelector('.cat-title').textContent.trim());if(st.openCats.includes(title))
openPanel(cat.querySelector('.cat-panel'),cat.querySelector('.cat-header'));});}
if(st.openSubs?.length){document.querySelectorAll('.sub-acc').forEach((b)=>{if(st.openSubs.includes(b.dataset.anchor))
openPanel(b.nextElementSibling,b);});}
if(st.openSideCats?.length){const first=st.openSideCats[0];document.querySelectorAll('.s-cat').forEach((c)=>c.classList.toggle('open',c.dataset.cat===first));}
filter();setActiveAnchor(st.anchor||'');return true;}catch(e){return false;}}
const menuToggle=document.getElementById('menuToggle');const sidebar=document.getElementById('sidebar');menuToggle?.addEventListener('click',()=>{sidebar.classList.toggle('open');});function wireToggles(){document.querySelectorAll('[data-cat] .cat-header').forEach((h)=>{h.addEventListener('click',()=>{togglePanel(h.nextElementSibling,h);saveState();});h.addEventListener('keydown',(e)=>{if(e.key==='Enter'||e.key===' '){e.preventDefault();togglePanel(h.nextElementSibling,h);saveState();}});});document.querySelectorAll('.sub-acc').forEach((btn)=>{btn.addEventListener('click',()=>{togglePanel(btn.nextElementSibling,btn);if(btn.classList.contains('open')){openByAnchor(btn.dataset.anchor,true,true);}else{saveState();}});});}
let spyObserver=null;function initScrollSpy(){if(spyObserver){spyObserver.disconnect();spyObserver=null;}
const options={root:null,rootMargin:'-30% 0px -50% 0px',threshold:[0,0.1,0.25,0.5,0.75,1],};spyObserver=new IntersectionObserver((entries)=>{const visible=entries.filter((e)=>e.isIntersecting).sort((a,b)=>b.intersectionRatio-a.intersectionRatio);if(visible.length){const id=visible[0].target.getAttribute('data-anchor');if(id&&id!==currentAnchor){setActiveAnchor(id);}}},options);document.querySelectorAll('.sub-panel').forEach((p)=>spyObserver.observe(p));}
renderContent();renderTopPills();renderSideNav();wireToggles();openDefaults();const byHash=openByHash();if(!byHash)restoreState();highlightActiveNav();initScrollSpy();