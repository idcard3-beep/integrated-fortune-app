const API_BASE_URL='';async function calcSajuAPI(birthDatetime,calendarType='solar',timeType='normal'){try{const response=await fetch(`${API_BASE_URL}/saju/api/calc-saju`,{method:'POST',headers:{'Content-Type':'application/json',},body:JSON.stringify({birth_datetime:birthDatetime,calendar_type:calendarType,time_type:timeType,}),});const result=await response.json();if(!result.success){throw new Error(result.error);}
return result.data;}catch(error){console.error('사주 계산 오류:',error);throw error;}}
async function convertLunarToSolarAPI(year,month,day,isLeap=false){try{const response=await fetch(`${API_BASE_URL}/saju/api/lunar-to-solar`,{method:'POST',headers:{'Content-Type':'application/json',},body:JSON.stringify({year:parseInt(year),month:parseInt(month),day:parseInt(day),is_leap:isLeap,}),});const result=await response.json();if(!result.success){throw new Error(result.error);}
return result.data;}catch(error){console.error('음력 변환 오류:',error);throw error;}}
async function calcDaeunAPI(birthDatetime,gender,monthGan,monthZhi,calendarType='solar'){try{const response=await fetch(`${API_BASE_URL}/saju/api/calc-daeun`,{method:'POST',headers:{'Content-Type':'application/json',},body:JSON.stringify({birth_datetime:birthDatetime,gender:gender,month_gan:monthGan,month_zhi:monthZhi,calendar_type:calendarType,}),});const result=await response.json();if(!result.success){throw new Error(result.error);}
return result.data;}catch(error){console.error('대운 계산 오류:',error);throw error;}}
async function calcYeonunAPI(birthYear,currentYear=null,range=10){try{const response=await fetch(`${API_BASE_URL}/saju/api/calc-yeonun`,{method:'POST',headers:{'Content-Type':'application/json',},body:JSON.stringify({birth_year:parseInt(birthYear),current_year:currentYear||new Date().getFullYear(),range:range,}),});const result=await response.json();if(!result.success){throw new Error(result.error);}
return result.data;}catch(error){console.error('연운 계산 오류:',error);throw error;}}
async function calcWolunAPI(targetYear){try{const response=await fetch(`${API_BASE_URL}/saju/api/calc-wolun`,{method:'POST',headers:{'Content-Type':'application/json',},body:JSON.stringify({target_year:parseInt(targetYear),}),});const result=await response.json();if(!result.success){throw new Error(result.error);}
return result.data;}catch(error){console.error('월운 계산 오류:',error);throw error;}}
async function getSolarTermsByYearAPI(year){try{const response=await fetch(`${API_BASE_URL}/saju/api/solar-terms/${year}`);const result=await response.json();if(!result.success){throw new Error(result.error);}
return result.terms;}catch(error){console.error('절기 데이터 조회 오류:',error);throw error;}}
if(typeof window!=='undefined'){window.SajuAPI={calcSaju:calcSajuAPI,convertLunarToSolar:convertLunarToSolarAPI,calcDaeun:calcDaeunAPI,calcYeonun:calcYeonunAPI,calcWolun:calcWolunAPI,getSolarTermsByYear:getSolarTermsByYearAPI,};}