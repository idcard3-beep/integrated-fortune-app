document.addEventListener('DOMContentLoaded',function(){document.getElementById('y').textContent=new Date().getFullYear();const copyBtn=document.getElementById('copyAddr');const saveBtn=document.getElementById('savePNG');const printBtn=document.getElementById('printBtn');const closeBtn=document.getElementById('closeBtn');closeBtn.addEventListener('click',()=>{if(window.self!==window.top){window.parent.postMessage('closeIframe','*');}else{window.close();}});copyBtn.addEventListener('click',async()=>{const addr='서울 금천구 시흥대로 97, 시흥유통상가';try{await navigator.clipboard.writeText(addr);alert('주소가 복사되었습니다.');}catch{prompt('복사되지 않는 경우 직접 복사해 주세요:',addr);}});saveBtn.addEventListener('click',()=>{alert('PNG 저장은 현재 SVG 약도에 한해 지원됩니다. 지도를 이미지로 저장하시려면 인쇄버튼을 이용하세요.');});printBtn.addEventListener('click',()=>window.print());const routeBtn=document.getElementById('routeBtn');if(routeBtn){routeBtn.addEventListener('click',()=>{const addr='서울 금천구 시흥대로 97, 시흥유통상가';const lat=37.442808711723;const lng=126.90323244858;const message='길찾기 서비스를 선택해주세요:\n\n1: 네이버 지도\n2: 구글 지도\n3: 카카오맵';const choice=prompt(message,'1');if(choice===null){return;}
if(choice==='1'){const naverUrl=`https://map.naver.com/v5/directions/-/-/-/-/${encodeURIComponent(addr)}?c=${lat},${lng},17,0,0,0,dh`;window.open(naverUrl,'_blank','noopener,noreferrer');}else if(choice==='2'){const googleUrl=`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(addr)}`;window.open(googleUrl,'_blank','noopener,noreferrer');}else if(choice==='3'){const kakaoUrl=`https://map.kakao.com/link/to/${encodeURIComponent('시흥유통상가')},${lat},${lng}`;window.open(kakaoUrl,'_blank','noopener,noreferrer');}});}
const mapLinkBtn=document.getElementById('mapLinkBtn');if(mapLinkBtn){mapLinkBtn.addEventListener('click',()=>{const addr='서울 금천구 시흥대로 97, 시흥유통상가';const lat=37.442808711723;const lng=126.90323244858;const message='지도 서비스를 선택해주세요:\n\n1: 네이버 지도\n2: 구글 지도\n3: 카카오맵';const choice=prompt(message,'1');if(choice===null){return;}
if(choice==='1'){const naverUrl=`https://map.naver.com/v5/search/${encodeURIComponent(addr)}`;window.open(naverUrl,'_blank','noopener,noreferrer');}else if(choice==='2'){const googleUrl=`https://maps.google.com/?q=${encodeURIComponent(addr)}`;window.open(googleUrl,'_blank','noopener,noreferrer');}else if(choice==='3'){const kakaoUrl=`https://map.kakao.com/link/to/${encodeURIComponent('시흥유통상가')},${lat},${lng}`;window.open(kakaoUrl,'_blank','noopener,noreferrer');}});}
const CENTER=[37.442808711723,126.90323244858];const map=L.map('liveMap',{scrollWheelZoom:true}).setView(CENTER,17);L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{attribution:'&copy; OpenStreetMap contributors',}).addTo(map);const pin=L.marker(CENTER,{title:'시흥유통상가'}).addTo(map);pin.bindPopup(`<div class="pin-popup"><b>시흥유통상가 (시흥대로 97)</b><div>서울 금천구</div><div style="margin-top:6px"><a href="https://map.naver.com/v5/search/%EC%8B%9C%ED%9D%A5%EB%8C%80%EB%A1%9C%2097%2C%20%EC%8B%9C%ED%9D%A5%EC%9C%A0%ED%86%B5%EC%83%81%EA%B0%80" target="_blank" rel="noopener">네이버지도</a> · <a href="https://maps.google.com/?q=%EC%84%9C%EC%9A%B8%20%EA%B8%88%EC%B2%9C%EA%B5%AC%20%EC%8B%9C%ED%9D%A5%EB%8C%80%EB%A1%9C%2097%2C%20%EC%8B%9C%ED%9D%A5%EC%9C%A0%ED%86%B5%EC%83%81%EA%B0%80" target="_blank" rel="noopener">구글지도</a> · <a href="https://map.kakao.com/?q=%EC%8B%9C%ED%9D%A5%EB%8C%80%EB%A1%9C%2097%2C%20%EC%8B%9C%ED%9D%A5%EC%9C%A0%ED%86%B5%EC%83%81%EA%B0%80" target="_blank" rel="noopener">카카오맵</a></div></div>`);L.circle(CENTER,{radius:55,color:'#18a0fb',fillColor:'#18a0fb',fillOpacity:0.08,weight:1.2,}).addTo(map);});