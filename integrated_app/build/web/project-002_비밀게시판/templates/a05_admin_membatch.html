<!doctype html><html lang=ko><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><title>관리자 — 정회원 / 비밀상담요청 / 관리자답변</title><style>/* ===== THEME TOKENS (CSS Variables) ===== */
      :root {
        --bg: #0b0f14;
        --card: #101725;
        --muted: #9bb0c9;
        --text: #e8f0ff;
        --accent: #8ab4ff;
        --ok: #2ecc71;
        --warn: #f1c40f;
        --err: #e74c3c;
        --chip: #162235;
        --border: #233149;
        --sel: #18253a;
        --sel2: #23324d;
        --input: #0e1522;
        --input-br: #2a3a58;
        --btn: #1a2740;
        --btn-h: #213150;
      }
      /* Light */
      .theme-light {
        --bg: #f7f9fc;
        --card: #ffffff;
        --muted: #5a6b82;
        --text: #0f172a;
        --accent: #1849ab;
        --ok: #1a7f38;
        --warn: #b17800;
        --err: #b42318;
        --chip: #f1f5f9;
        --border: #d6e0ee;
        --sel: #eef4ff;
        --sel2: #e3ecff;
        --input: #ffffff;
        --input-br: #c9d6ea;
        --btn: #f3f6fb;
        --btn-h: #e9f1ff;
      }
      /* Dim (저휘도 중간 테마) */
      .theme-dim {
        --bg: #0e1218;
        --card: #121823;
        --muted: #9fb3c9;
        --text: #e6eefb;
        --accent: #7aa2ff;
        --ok: #25b06b;
        --warn: #d3aa2e;
        --err: #d46156;
        --chip: #162032;
        --border: #223149;
        --sel: #1a2436;
        --sel2: #212f49;
        --input: #0f1622;
        --input-br: #27385a;
        --btn: #18243a;
        --btn-h: #1e2c46;
      }
      /* Sepia (종이 느낌, 장시간 문서 읽기) */
      .theme-sepia {
        --bg: #f8f4ea;
        --card: #fffdf6;
        --muted: #776a5d;
        --text: #3a2f25;
        --accent: #7a5c2e;
        --ok: #2c7a3f;
        --warn: #b07c00;
        --err: #a13b2d;
        --chip: #f4f0e6;
        --border: #e3dacb;
        --sel: #f0e8d9;
        --sel2: #e8dfce;
        --input: #fffdf9;
        --input-br: #e6dbc6;
        --btn: #f4efe5;
        --btn-h: #ebe4d8;
      }
      /* Midnight (명암 대비 강화) */
      .theme-midnight {
        --bg: #070a0f;
        --card: #0b1018;
        --muted: #9db0c5;
        --text: #e8f0ff;
        --accent: #8ab4ff;
        --ok: #24c779;
        --warn: #e0b321;
        --err: #f06a61;
        --chip: #0f1724;
        --border: #1b2740;
        --sel: #132033;
        --sel2: #1a2a45;
        --input: #0a111c;
        --input-br: #244069;
        --btn: #12213a;
        --btn-h: #182a46;
      }

      * {
        box-sizing: border-box;
      }
      html,
      body {
        height: 100%;
      }
      body {
        margin: 0;
        background: var(--bg);
        color: var(--text);
        font: 14px/1.5 system-ui, Segoe UI, Roboto, Apple SD Gothic Neo,
          Noto Sans KR, sans-serif;
      }
      header {
        padding: 14px 16px;
        border-bottom: 1px solid var(--border);
        background: linear-gradient(180deg, rgba(0, 0, 0, 0.03), transparent);
      }
      header h1 {
        margin: 0;
        font-size: 18px;
      }
      header .sub {
        color: var(--muted);
        font-size: 12px;
        margin-top: 6px;
        display: flex;
        gap: 8px;
        align-items: center;
        flex-wrap: wrap;
      }
      .wrap {
        padding: 14px;
        display: grid;
        gap: 14px;
        grid-template-columns: 1.1fr 1fr;
      }
      @media (max-width: 1200px) {
        .wrap {
          grid-template-columns: 1fr;
        }
      }
      .col {
        display: flex;
        flex-direction: column;
        gap: 14px;
      }
      .row {
        display: grid;
        gap: 14px;
      }
      .card {
        background: var(--card);
        border: 1px solid var(--border);
        border-radius: 14px;
        box-shadow: 0 8px 28px rgba(0, 0, 0, 0.18);
      }
      .hd {
        display: flex;
        gap: 10px;
        align-items: center;
        padding: 12px 14px;
        border-bottom: 1px solid var(--border);
      }
      .hd h2 {
        margin: 0;
        font-size: 15px;
      }
      .pill {
        margin-left: auto;
        background: var(--chip);
        border: 1px solid var(--border);
        color: var(--muted);
        padding: 6px 10px;
        border-radius: 999px;
        font-size: 12px;
      }
      .tools {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
      }
      .search input {
        background: var(--input);
        border: 1px solid var(--input-br);
        color: var(--text);
        padding: 8px 10px;
        border-radius: 10px;
        min-width: 220px;
        outline: none;
      }
      .btn {
        background: var(--btn);
        border: 1px solid var(--border);
        color: var(--text);
        padding: 8px 10px;
        border-radius: 10px;
        cursor: pointer;
      }
      .btn:hover {
        background: var(--btn-h);
      }
      /* >>> Only these two rules changed (soft/neutral tones) <<< */
      .btn.del {
        background: #f0d7d7;
        border-color: #e0bfbf;
        color: #5a2020;
      }
      .btn.del:hover {
        background: #e8c6c6;
      }
      .btn.ok {
        background: #d9e8dc;
        border-color: #aac7b5;
        color: #1e402f;
      }
      .btn.ok:hover {
        background: #cfe3d5;
      }
      /* ----------------------------------------------- */
      .grid-legend {
        padding: 8px 14px;
        color: var(--muted);
        font-size: 12px;
      }
      .tblwrap {
        overflow: auto;
        max-height: 42vh;
      }
      table {
        width: 100%;
        border-collapse: separate;
        border-spacing: 0;
      }
      th,
      td {
        padding: 9px 10px;
        border-bottom: 1px solid var(--border);
        white-space: nowrap;
        vertical-align: top;
      }
      th {
        position: sticky;
        top: 0;
        background: color-mix(in oklab, var(--card) 85%, black 10%);
        z-index: 1;
        font-weight: 600;
        color: color-mix(in oklab, var(--text) 80%, white 0%);
        border-bottom: 1px solid
          color-mix(in oklab, var(--border) 70%, black 10%);
        user-select: none;
        cursor: pointer;
      }
      tr:hover td {
        background: var(--sel);
      }
      tr.selected td {
        background: var(--sel2);
      }
      .tag {
        display: inline-block;
        padding: 2px 8px;
        border-radius: 999px;
        border: 1px solid var(--border);
        background: var(--chip);
        font-size: 12px;
        color: color-mix(in oklab, var(--text) 85%, white 0%);
      }
      .tag.ok {
        background: color-mix(in oklab, var(--ok) 20%, black 85%);
        border-color: color-mix(in oklab, var(--ok) 60%, black 30%);
        color: #86f5af;
      }
      .tag.warn {
        background: color-mix(in oklab, var(--warn) 20%, black 85%);
        border-color: color-mix(in oklab, var(--warn) 60%, black 30%);
        color: #ffd86b;
      }
      .tag.err {
        background: color-mix(in oklab, var(--err) 20%, black 85%);
        border-color: color-mix(in oklab, var(--err) 60%, black 30%);
        color: #ffb4b4;
      }
      .ellipsis {
        max-width: 380px;
        overflow: hidden;
        text-overflow: ellipsis;
      }
      .footer {
        padding: 10px 14px;
        border-top: 1px solid var(--border);
        color: color-mix(in oklab, var(--muted) 90%, gray 0%);
        font-size: 12px;
      }
      /* 폼 */
      .form {
        padding: 12px 14px;
        border-top: 1px dashed var(--border);
        background: color-mix(in oklab, var(--card) 90%, var(--bg) 10%);
      }
      .form h3 {
        margin: 4px 0 12px 0;
        font-size: 14px;
      }
      .fg {
        display: grid;
        gap: 10px;
        grid-template-columns: repeat(4, 1fr);
      }
      @media (max-width: 1200px) {
        .fg {
          grid-template-columns: repeat(2, 1fr);
        }
      }
      @media (max-width: 640px) {
        .fg {
          grid-template-columns: 1fr;
        }
      }
      .fi {
        display: flex;
        flex-direction: column;
        gap: 6px;
      }
      .fi label {
        font-size: 12px;
        color: var(--muted);
      }
      .fi input,
      .fi select,
      .fi textarea {
        background: var(--input);
        border: 1px solid var(--input-br);
        color: var(--text);
        padding: 8px 10px;
        border-radius: 10px;
        outline: none;
        width: 100%;
      }
      .fi textarea {
        min-height: 84px;
        resize: vertical;
      }
      .form-actions {
        display: flex;
        gap: 8px;
        margin-top: 10px;
        flex-wrap: wrap;
      }
      .kbd {
        background: var(--chip);
        border: 1px solid var(--border);
        padding: 2px 6px;
        border-radius: 6px;
      }
      .hint {
        color: var(--muted);
        font-size: 12px;
        margin-top: 6px;
      }

      /* Theme Control UI */
      .themebar {
        display: flex;
        gap: 8px;
        align-items: center;
        margin-left: auto;
      }
      .select {
        position: relative;
      }
      .select button {
        min-width: 140px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      .menu {
        position: absolute;
        inset: auto 0 0 auto;
        transform: translateY(calc(100% + 6px));
        min-width: 180px;
        background: var(--card);
        border: 1px solid var(--border);
        border-radius: 12px;
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.25);
        padding: 6px;
        display: none;
        z-index: 9;
      }
      .menu.open {
        display: block;
      }
      .menu button {
        width: 100%;
        text-align: left;
        margin: 0 0 4px 0;
      }
      .menu button:last-child {
        margin-bottom: 0;
      }

      @media (prefers-reduced-motion: reduce) {
        * {
          scroll-behavior: auto;
        }
      }</style><link href=/secret/static/security.css rel=stylesheet><body class=theme-dim><header><div style="display: flex;
          justify-content: space-between;
          align-items: center;"><h1 style="margin: 0">정회원 / 비밀상담요청 / 관리자답변</h1><button onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='0 2px 8px rgba(0,0,0,0.2)';" onmouseover="this.style.transform='scale(1.05)'; this.style.boxShadow='0 4px 12px rgba(0,0,0,0.3)';" style="padding: 8px 16px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;" class=btn id=closeBtn>✕ 닫기</button></div><div class=sub>행 선택 → 아래 폼에 스키마와 <strong>동일한 필드명</strong>으로 로드 → 수정/삭제 반영(데모는 메모리 반영). <span class=kbd>헤더 클릭</span> 정렬, <span class=kbd>Shift</span> 다중정렬. <span class=themebar> <span aria-hidden=true class=muted>테마</span> <span class=select> <button aria-label="테마 선택" aria-expanded=false aria-haspopup=listbox class=btn id=themeBtn><span id=themeLabel>Dim</span> ▼</button> <div aria-label="테마 목록" class=menu id=themeMenu role=listbox><button class=btn data-theme=theme-dim role=option>Dim (권장)</button><button class=btn data-theme=theme-midnight role=option>Midnight</button><button class=btn data-theme=theme-light role=option>Light</button><button class=btn data-theme=theme-sepia role=option>Sepia</button></div> </span> </span></div></header><div class=wrap><div class=col><section class=card id=card-members><div class=hd><h2>① sMembers (정회원)</h2><span class=pill id=count-members>0 rows</span><div class=tools><span class=search><input placeholder="검색: sMem_id / 이름 / 닉네임 / 이메일" id=search-members></span><button class=btn id=reset-members>선택 해제</button></div></div><div class=grid-legend>주요 컬럼 표시(전체는 아래 폼에서 편집)</div><div class=tblwrap><table aria-label="sMembers table" id=tbl-members><thead><tr><th data-k=sMem_id>sMem_id<th data-k=sMem_name>sMem_name<th data-k=sMem_nickname>sMem_nickname<th data-k=sMem_email>sMem_email<th data-k=sMem_gender>sMem_gender<th data-k=sMem_status>sMem_status<th data-k=created_at>created_at<tbody></table></div><div class=form hidden id=form-members><h3>① 선택 레코드 편집 — sMembers</h3><form id=members-edit><div class=fg id=members-fields></div><div class=form-actions><button class="btn ok" id=save-member>저장(수정)</button><button class="btn del" id=delete-member>삭제</button><span class=hint>PK: <code>sM_id</code> (SERIAL) / 업무키: <code>sMem_id</code></span></div></form></div><div class=footer>선택 회원: <span class=tag id=sel-member>없음</span></div></section></div><div class=col><section class=row><section class=card id=card-tickets><div class=hd><h2>② tickets (비밀상담요청)</h2><span class=pill id=count-tickets>0 rows</span><div class=tools><span class=search><input placeholder="검색: title_masked / author_nickname / status" id=search-tickets></span><button class=btn id=reset-tickets>선택 해제</button></div></div><div class=grid-legend>①에서 회원 선택 시 sMember_id 기준 자동 필터</div><div class=tblwrap><table aria-label="tickets table" id=tbl-tickets><thead><tr><th data-k=title_masked>title_masked<th data-k=author_nickname>author_nickname<th data-k=status>status<th data-k=has_admin_reply>has_admin_reply<th data-k=sMember_id>sMember_id<th data-k=created_at>created_at<tbody></table></div><div class=form hidden id=form-tickets><h3>② 선택 레코드 편집 — tickets</h3><form id=tickets-edit><div class=fg id=tickets-fields></div><div class=form-actions><button class="btn ok" id=save-ticket>저장(수정)</button><button class="btn del" id=delete-ticket>삭제</button><span class=hint>PK: <code>ticket_id</code> (UUID)</span></div></form></div><div class=footer>선택 티켓: <span class=tag id=sel-ticket>없음</span></div></section><section class=card id=card-msgs><div class=hd><h2>③ thread_messages (관리자 답변/스레드)</h2><span class=pill id=count-msgs>0 rows</span><div class=tools><span class=search><input placeholder="검색: role / content_enc" id=search-msgs></span></div></div><div class=grid-legend>②에서 티켓 선택 시 ticket_id 기준 자동 필터 · ①만 선택 시 해당 회원의 모든 티켓/메시지</div><div class=tblwrap><table aria-label="thread_messages table" id=tbl-msgs><thead><tr><th data-k=created_at>created_at<th data-k=role>role<th data-k=ticket_id>ticket_id<th data-k=content_enc>content_enc<tbody></table></div><div class=form hidden id=form-msgs><h3>③ 선택 레코드 편집 — thread_messages</h3><form id=msgs-edit><div class=fg id=msgs-fields></div><div class=form-actions><button class="btn ok" id=save-msg>저장(수정)</button><button class="btn del" id=delete-msg>삭제</button><span class=hint>PK: <code>msg_id</code> (UUID) / FK: <code>ticket_id</code> → tickets.ticket_id</span></div></form></div><div class=footer>필터 기준: <span class=tag id=filter-desc>전체</span></div></section></section></div></div><script src=/secret/static/security.js></script><script src=/secret/static/admin_session.js></script><script src=/secret/static/member_session.js></script><script src=/secret/static/admin_membatch.js></script>